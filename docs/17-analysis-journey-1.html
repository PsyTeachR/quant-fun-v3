<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="description" content="Materials for the MSc Conversion Research Methods 1 and 2 courses at the University of Glasgow School of Psychology &amp; Neuroscience.">
<title>Fundamentals of Quantitative Analysis - 15&nbsp; Analysis Journey 1: Data Wrangling</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./18-analysis-journey-2.html" rel="next">
<link href="./16-analysis-journeys.html" rel="prev">
<link href="./images/logos/logo.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.13.0/css/all.css">
<link rel="stylesheet" href="include/booktem.css">
<link rel="stylesheet" href="include/webex.css">
<link rel="stylesheet" href="include/glossary.css">
<link rel="stylesheet" href="include/style.css">
</head>
<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./17-analysis-journey-1.html"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Analysis Journey 1: Data Wrangling</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Fundamentals of Quantitative Analysis</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/BartlettJE/quant-fun-v3/" rel="" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
<li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=%7Curl%7C">
              <i class="bi bi-bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=%7Curl%7C">
              <i class="bi bi-bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=%7Curl%7C">
              <i class="bi bi-bi-linkedin pe-1"></i>
            LinkedIn
            </a>
          </li>
      </ul>
</div>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00-foreword.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">How to use this book</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-programming-basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction to programming with R/R Studio</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-starting-with-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Creating Reproducible Documents</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-intro-data-viz.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Introduction to Data Visualisation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-wrangling-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Data wrangling 1: Join, select, and mutate</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-wrangling-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Data wrangling 2: Filter and summarise</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-wrangling-3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Data Wrangling 3: Pivots and Pipes</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-more-visualisation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Scatterplots, boxplots, and violin-boxplots</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-lm-continuous.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Regression with one continuous predictor</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-lm-categorical.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Regression with one categorical predictor</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-power.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Statistical Power and Effect Sizes</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-screening-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Screening Data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-anova.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">One-way ANOVA</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13-factorial-anova.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Factorial ANOVA</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14-multiple-regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Multiple Regression</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./16-analysis-journeys.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Analysis Journeys</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./17-analysis-journey-1.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Analysis Journey 1: Data Wrangling</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./18-analysis-journey-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Analysis Journey 2: Simple Linear Regression</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix-a2-additional-learning-resources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Additional Resources</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix-a3-How-to-cite-R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Citing R and RStudio</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix-b-symbols.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">Symbols</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix-d-probability.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">D</span>&nbsp; <span class="chapter-title">Probability</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix-y-license.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">License</span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li>
<a href="#task-preparation" id="toc-task-preparation" class="nav-link active" data-scroll-target="#task-preparation"><span class="header-section-number">15.1</span> Task preparation</a>
  <ul class="collapse">
<li><a href="#introduction-to-the-data-set" id="toc-introduction-to-the-data-set" class="nav-link" data-scroll-target="#introduction-to-the-data-set"><span class="header-section-number">15.1.1</span> Introduction to the data set</a></li>
  <li><a href="#organising-your-files-and-project-for-the-task" id="toc-organising-your-files-and-project-for-the-task" class="nav-link" data-scroll-target="#organising-your-files-and-project-for-the-task"><span class="header-section-number">15.1.2</span> Organising your files and project for the task</a></li>
  </ul>
</li>
  <li>
<a href="#overview" id="toc-overview" class="nav-link" data-scroll-target="#overview"><span class="header-section-number">15.2</span> Overview</a>
  <ul class="collapse">
<li><a href="#load-tidyverse-and-read-the-data-files" id="toc-load-tidyverse-and-read-the-data-files" class="nav-link" data-scroll-target="#load-tidyverse-and-read-the-data-files"><span class="header-section-number">15.2.1</span> Load <pkg>tidyverse</pkg> and read the data files</a></li>
  <li><a href="#explore-demog-and-trials" id="toc-explore-demog-and-trials" class="nav-link" data-scroll-target="#explore-demog-and-trials"><span class="header-section-number">15.2.2</span> Explore <code>demog</code> and <code>trials</code></a></li>
  </ul>
</li>
  <li>
<a href="#wrangling-demographics" id="toc-wrangling-demographics" class="nav-link" data-scroll-target="#wrangling-demographics"><span class="header-section-number">15.3</span> Wrangling demographics</a>
  <ul class="collapse">
<li><a href="#task-list" id="toc-task-list" class="nav-link" data-scroll-target="#task-list"><span class="header-section-number">15.3.1</span> Task list</a></li>
  <li><a href="#solution" id="toc-solution" class="nav-link" data-scroll-target="#solution"><span class="header-section-number">15.3.2</span> Solution</a></li>
  </ul>
</li>
  <li>
<a href="#wrangling-trials" id="toc-wrangling-trials" class="nav-link" data-scroll-target="#wrangling-trials"><span class="header-section-number">15.4</span> Wrangling trials</a>
  <ul class="collapse">
<li><a href="#task-list-1" id="toc-task-list-1" class="nav-link" data-scroll-target="#task-list-1"><span class="header-section-number">15.4.1</span> Task list</a></li>
  <li><a href="#solution-1" id="toc-solution-1" class="nav-link" data-scroll-target="#solution-1"><span class="header-section-number">15.4.2</span> Solution</a></li>
  </ul>
</li>
  <li>
<a href="#combining-objects-and-exclusion-criteria" id="toc-combining-objects-and-exclusion-criteria" class="nav-link" data-scroll-target="#combining-objects-and-exclusion-criteria"><span class="header-section-number">15.5</span> Combining objects and exclusion criteria</a>
  <ul class="collapse">
<li><a href="#solution-2" id="toc-solution-2" class="nav-link" data-scroll-target="#solution-2"><span class="header-section-number">15.5.1</span> Solution</a></li>
  </ul>
</li>
  <li>
<a href="#summarisingvisualising-your-data" id="toc-summarisingvisualising-your-data" class="nav-link" data-scroll-target="#summarisingvisualising-your-data"><span class="header-section-number">15.6</span> Summarising/visualising your data</a>
  <ul class="collapse">
<li><a href="#demographics" id="toc-demographics" class="nav-link" data-scroll-target="#demographics"><span class="header-section-number">15.6.1</span> Demographics</a></li>
  <li><a href="#measures-of-smoking-dependence" id="toc-measures-of-smoking-dependence" class="nav-link" data-scroll-target="#measures-of-smoking-dependence"><span class="header-section-number">15.6.2</span> Measures of smoking dependence</a></li>
  <li><a href="#attentional-bias" id="toc-attentional-bias" class="nav-link" data-scroll-target="#attentional-bias"><span class="header-section-number">15.6.3</span> Attentional bias</a></li>
  </ul>
</li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion"><span class="header-section-number">15.7</span> Conclusion</a></li>
  </ul><div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/BartlettJE/quant-fun-v3/edit/main/17-analysis-journey-1.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/BartlettJE/quant-fun-v3/issues/new" class="toc-action">Report an issue</a></p><p><a href="https://github.com/BartlettJE/quant-fun-v3/blob/main/17-analysis-journey-1.qmd" class="toc-action">View source</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title"><span id="journey-01-wrangling" class="quarto-section-identifier"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Analysis Journey 1: Data Wrangling</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header><p>Welcome to the first data analysis journey. We have designed these chapters as a bridge between the structured learning in the core chapters and your assessments. We present you with a new data set, show you what the end product should look like, and see if you can apply your data wrangling, visualisation, and/or analysis skills to get there.</p>
<p>As you gain independence, this is the crucial skill. Data analysis is all about seeing the data you have available to you and identifying what the end product needs to be to apply your visualisation and analysis techniques. You can then mentally (or physically) create a checklist of tasks to work backwards to get there. There might be a lot of trial and error as you try one thing, it does not quite work, so you go back and try something else. If you get stuck though, we have a range of hints and task lists you can unhide, then the solution to check your attempts against.</p>
<p>In this first data analysis journey, we focus on data wrangling to apply all the skills you developed from Chapter 1 to Chapter 6.</p>
<section id="task-preparation" class="level2" data-number="15.1"><h2 data-number="15.1" class="anchored" data-anchor-id="task-preparation">
<span class="header-section-number">15.1</span> Task preparation</h2>
<section id="introduction-to-the-data-set" class="level3" data-number="15.1.1"><h3 data-number="15.1.1" class="anchored" data-anchor-id="introduction-to-the-data-set">
<span class="header-section-number">15.1.1</span> Introduction to the data set</h3>
<p>For this task, we are using open data from <span class="citation" data-cites="bartlett_no_2022">Bartlett et al. (<a href="references.html#ref-bartlett_no_2022" role="doc-biblioref">2022</a>)</span>. The abstract of their article is:</p>
<blockquote class="blockquote">
<p>Both daily and non-daily smokers find it difficult to quit smoking long-term. One factor associated with addictive behaviour is attentional bias, but previous research in daily and non-daily smokers found inconsistent results and did not report the reliability of their cognitive tasks. Using an online sample, we compared daily (n = 106) and non-daily (n = 60) smokers in their attentional bias towards smoking pictures. Participants completed a visual probe task with two picture presentation times: 200ms and 500ms. In confirmatory analyses, there were no significant effects of interest, and in exploratory analyses, equivalence testing showed the effects were statistically equivalent to zero. The reliability of the visual probe task was poor, meaning it should not be used for repeated testing or investigating individual differences. The results can be interpreted in line with contemporary theories of attentional bias where there are unlikely to be stable trait-like differences between smoking groups. Future research in attentional bias should focus on state-level differences using more reliable measures than the visual probe task.</p>
</blockquote>
<p>To summarise, they compared two daily and non-daily smokers on something called attentional bias. This is the idea that when people use drugs often, things associated with those drugs grab people’s attention.</p>
<p>To measure attentional bias, participants completed a dot probe task. This is a computer task where participants see two pictures side-by-side: one related to smoking like someone holding a cigarette and one unrelated to smoking like someone holding a fork. Both the images disappear and a small dot appears in the location of one of the images. Participants must press left or right on the keyboard to identify where the dot appeared. This process is repeated many times for different images, different locations of the dot, and different durations of showing the images. The idea is if smoking images grab people’s attention, they will be able to identify the dot location faster on average when it appears in the location of the smoking images compared to when it appears in the location of the the non-smoking images.</p>
<p>Response time tasks like this are incredibly common in psychology and cognitive neuroscience, and being able to wrangle hundreds of trials is a great demonstration of your new data skills. After setting up your files and project for the chapter, we will outline the kind of problems you are trying to solve.</p>
</section><section id="organising-your-files-and-project-for-the-task" class="level3" data-number="15.1.2"><h3 data-number="15.1.2" class="anchored" data-anchor-id="organising-your-files-and-project-for-the-task">
<span class="header-section-number">15.1.2</span> Organising your files and project for the task</h3>
<p>Before we can get started, you need to organise your files and project for the task, so your working directory is in order.</p>
<ol type="1">
<li><p>In your folder for research methods and the book <code>ResearchMethods1_2/Quant_Fundamentals</code>, create a new folder for the data analysis journey called <code>Journey_01_wrangling</code>. Within <code>Journey_01_wrangling</code>, create two new folders called <code>data</code> and <code>figures</code>.</p></li>
<li><p>Create an R Project for <code>Journey_01_wrangling</code> as an existing directory for your chapter folder. This should now be your working directory.</p></li>
<li><p>Create a new R Markdown document and give it a sensible title describing the chapter, such as <code>Analysis Journey 1 - Data Wrangling</code>. Delete everything below line 10 so you have a blank file to work with and save the file in your <code>Journey_01_wrangling</code> folder.</p></li>
<li><p>We are working with data separated into two files. The links are data file one (<a href="data/Bartlett_demographics.csv">Bartlett_demographics.csv</a>) and data file two (<a href="data/Bartlett_trials.csv">Bartlett_trials.csv</a>). Right click the links and select “save link as”, or clicking the links will save the files to your Downloads. Make sure that both files are saved as “.csv”. Save or copy the file to your <code>data/</code> folder within <code>Journey_01_wrangling</code>.</p></li>
</ol>
<p>You are now ready to start working on the task!</p>
</section></section><section id="overview" class="level2" data-number="15.2"><h2 data-number="15.2" class="anchored" data-anchor-id="overview">
<span class="header-section-number">15.2</span> Overview</h2>
<section id="load-tidyverse-and-read-the-data-files" class="level3" data-number="15.2.1"><h3 data-number="15.2.1" class="anchored" data-anchor-id="load-tidyverse-and-read-the-data-files">
<span class="header-section-number">15.2.1</span> Load <pkg>tidyverse</pkg> and read the data files</h3>
<p>Before we explore what wrangling we need to do, load <pkg>tidyverse</pkg> and read the two data files. As a prompt, save the data files to these object names to be consistent with the activities below, but you can check the solution if you are stuck.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># Load the tidyverse package below</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-3"><a href="#cb1-3"></a></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="co"># Load the data files</span></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="co"># This should be the Bartlett_demographics.csv file </span></span>
<span id="cb1-6"><a href="#cb1-6"></a>demog <span class="ot">&lt;-</span> ?</span>
<span id="cb1-7"><a href="#cb1-7"></a></span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="co"># This should be the Bartlett_trials.csv file </span></span>
<span id="cb1-9"><a href="#cb1-9"></a>trials <span class="ot">&lt;-</span> ?</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Show me the solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>You should have the following in a code chunk:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="co"># Load the tidyverse package below</span></span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb2-3"><a href="#cb2-3"></a></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="co"># Load the data files</span></span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="co"># This should be the Bartlett_demographics.csv file </span></span>
<span id="cb2-6"><a href="#cb2-6"></a>demog <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/Bartlett_demographics.csv"</span>)</span>
<span id="cb2-7"><a href="#cb2-7"></a></span>
<span id="cb2-8"><a href="#cb2-8"></a><span class="co"># This should be the Bartlett_trials.csv file </span></span>
<span id="cb2-9"><a href="#cb2-9"></a>trials <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/Bartlett_trials.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section><section id="explore-demog-and-trials" class="level3" data-number="15.2.2"><h3 data-number="15.2.2" class="anchored" data-anchor-id="explore-demog-and-trials">
<span class="header-section-number">15.2.2</span> Explore <code>demog</code> and <code>trials</code>
</h3>
<p>The data from <span class="citation" data-cites="bartlett_no_2022">Bartlett et al. (<a href="references.html#ref-bartlett_no_2022" role="doc-biblioref">2022</a>)</span> is split into two data files. In <code>demog</code>, we have the participant ID (<code>participant_private_id</code>) and several demographic variables.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 205
Columns: 20
$ participant_private_id &lt;dbl&gt; 631737, 631738, 631741, 631739, 631749, 631746,…
$ consent_given          &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…
$ age                    &lt;dbl&gt; 46, 54, 23, 34, 38, 19, 25, 21, 28, 35, 47, 45,…
$ cigarettes_per_week    &lt;chr&gt; "Yes", "Yes", "Yes", "Yes", "Yes", "Yes", "Yes"…
$ smoke_everyday         &lt;chr&gt; "Yes", "Yes", "Yes", "Yes", "Yes", "Yes", "Yes"…
$ past_four_weeks        &lt;chr&gt; "Yes", "Yes", "Yes", "Yes", "Yes", "Yes", "Yes"…
$ age_started_smoking    &lt;chr&gt; "12", "17", "17", "16", "15", "16", "22", "11",…
$ country_of_origin      &lt;chr&gt; "United Kingdom", "Germany", "Poland", "Austral…
$ cpd                    &lt;chr&gt; "6", "5", "10", "20", "10", "1", "6", "15", "12…
$ ethnicity              &lt;chr&gt; "White / Caucasian", "White / Caucasian", "Mixe…
$ gender                 &lt;chr&gt; "Female", "Female", "Male", "Female", "Female",…
$ last_cigarette         &lt;chr&gt; "60", "780", "90", "5", "60", "720", "10", "10"…
$ level_education        &lt;chr&gt; "Graduated University / College", "Graduated Un…
$ technical_issues       &lt;chr&gt; "No", "No", "No", "No", "No", "No", "No", "No",…
$ FTND_1                 &lt;dbl&gt; 2, 0, 0, 3, 3, 0, 1, 2, 1, 3, 2, 2, 2, 1, 2, 0,…
$ FTND_2                 &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 1, 0, 1, 0, 0,…
$ FTND_3                 &lt;dbl&gt; 1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0, 1, 0,…
$ FTND_4                 &lt;dbl&gt; 0, 0, 1, 1, 0, 1, 1, 0, 0, 0, 1, 1, 1, 0, 1, 1,…
$ FTND_5                 &lt;dbl&gt; 0, 0, 0, 1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 1, 0, 0,…
$ FTND_6                 &lt;dbl&gt; 0, 0, 0, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0,…</code></pre>
</div>
</div>
<p>The columns (variables) we have in the data set are:</p>
<table class="table">
<colgroup>
<col style="width: 19%">
<col style="width: 41%">
<col style="width: 39%">
</colgroup>
<thead><tr class="header">
<th style="text-align: center;">Variable</th>
<th style="text-align: left;">Type</th>
<th style="text-align: left;">Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">participant_private_id</td>
<td style="text-align: left;">double</td>
<td style="text-align: left;">Participant number.</td>
</tr>
<tr class="even">
<td style="text-align: center;">consent_given</td>
<td style="text-align: left;">double</td>
<td style="text-align: left;">1 = informed consent, 2 = no consent.</td>
</tr>
<tr class="odd">
<td style="text-align: center;">age</td>
<td style="text-align: left;">double</td>
<td style="text-align: left;">Age in Years.</td>
</tr>
<tr class="even">
<td style="text-align: center;">cigarettes_per_week</td>
<td style="text-align: left;">character</td>
<td style="text-align: left;">Do you smoke every week? Yes or No.</td>
</tr>
<tr class="odd">
<td style="text-align: center;">smoke_everyday</td>
<td style="text-align: left;">character</td>
<td style="text-align: left;">Do you smoke everyday? Yes or No.</td>
</tr>
<tr class="even">
<td style="text-align: center;">past_four_weeks</td>
<td style="text-align: left;">character</td>
<td style="text-align: left;">Have you smoked in the past four weeks? Yes or No.</td>
</tr>
<tr class="odd">
<td style="text-align: center;">age_started_smoking</td>
<td style="text-align: left;">character</td>
<td style="text-align: left;">Age started smoking in years.</td>
</tr>
<tr class="even">
<td style="text-align: center;">country_of_origin</td>
<td style="text-align: left;">character</td>
<td style="text-align: left;">Country of origin.</td>
</tr>
<tr class="odd">
<td style="text-align: center;">cpd</td>
<td style="text-align: left;">character</td>
<td style="text-align: left;">How many cigarettes do you smoke per day?</td>
</tr>
<tr class="even">
<td style="text-align: center;">ethnicity</td>
<td style="text-align: left;">character</td>
<td style="text-align: left;">What is your ethniciity?</td>
</tr>
<tr class="odd">
<td style="text-align: center;">gender</td>
<td style="text-align: left;">character</td>
<td style="text-align: left;">What is your gender?</td>
</tr>
<tr class="even">
<td style="text-align: center;">last_cigarette</td>
<td style="text-align: left;">character</td>
<td style="text-align: left;">How long in minutes since your last cigarette?</td>
</tr>
<tr class="odd">
<td style="text-align: center;">level_education</td>
<td style="text-align: left;">character</td>
<td style="text-align: left;">What is your highest level of education?</td>
</tr>
<tr class="even">
<td style="text-align: center;">technical_issues</td>
<td style="text-align: left;">character</td>
<td style="text-align: left;">Did you experience any technical issues? Yes or No</td>
</tr>
<tr class="odd">
<td style="text-align: center;">FTND_1 to FTND_6</td>
<td style="text-align: left;">double</td>
<td style="text-align: left;">Six items of the Fagerstrom Test for Nicotine Dependence</td>
</tr>
</tbody>
</table>
<p>In <code>trials</code>, we then have the participant ID (<code>participant_private_id</code>) and trial-by-trial information from the software Gorilla (an online experiment service). This is probably the biggest data set you have come across so far as we have hundreds of trials per participant.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 244,847
Columns: 15
$ participant_private_id &lt;dbl&gt; 631737, 631737, 631737, 631737, 631737, 631737,…
$ trial_number           &lt;chr&gt; "BEGIN TASK", "1", "1", "1", "1", "2", "2", "2"…
$ reaction_time          &lt;dbl&gt; NA, 8007.015, 249.823, 199.765, 1999.671, 249.8…
$ response               &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
$ correct                &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ display                &lt;chr&gt; NA, "instructions", "practice", "practice", "pr…
$ answer                 &lt;chr&gt; NA, NA, "right", "right", "right", "left", "lef…
$ soa                    &lt;dbl&gt; NA, NA, 200, 200, 200, 200, 200, 200, 500, 500,…
$ screen_name            &lt;chr&gt; NA, "instructions_continue", "Screen 1", "Scree…
$ image_left             &lt;chr&gt; NA, NA, "p1.jpg", "p1.jpg", "p1.jpg", "p1.jpg",…
$ image_right            &lt;chr&gt; NA, NA, "p2.jpg", "p2.jpg", "p2.jpg", "p2.jpg",…
$ dot_left               &lt;chr&gt; NA, NA, "nodot.jpg", "nodot.jpg", "nodot.jpg", …
$ dot_right              &lt;chr&gt; NA, NA, "dot.jpg", "dot.jpg", "dot.jpg", "nodot…
$ trial_type             &lt;chr&gt; NA, NA, "practice", "practice", "practice", "pr…
$ block                  &lt;dbl&gt; NA, NA, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …</code></pre>
</div>
</div>
<p>The columns (variables) we have in the data set are:</p>
<table class="table">
<colgroup>
<col style="width: 19%">
<col style="width: 41%">
<col style="width: 39%">
</colgroup>
<thead><tr class="header">
<th style="text-align: center;">Variable</th>
<th style="text-align: left;">Type</th>
<th style="text-align: left;">Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">participant_private_id</td>
<td style="text-align: left;">double</td>
<td style="text-align: left;">Participant number.</td>
</tr>
<tr class="even">
<td style="text-align: center;">trial_number</td>
<td style="text-align: left;">character</td>
<td style="text-align: left;">Trial number as an integer, plus start and end task.</td>
</tr>
<tr class="odd">
<td style="text-align: center;">reaction_time</td>
<td style="text-align: left;">double</td>
<td style="text-align: left;">Participant response time in milliseconds (ms)</td>
</tr>
<tr class="even">
<td style="text-align: center;">response</td>
<td style="text-align: left;">character</td>
<td style="text-align: left;">Keyboard response from participant. Left or Right.</td>
</tr>
<tr class="odd">
<td style="text-align: center;">correct</td>
<td style="text-align: left;">double</td>
<td style="text-align: left;">Was the response correct? 1 = correct, 0 = incorrect.</td>
</tr>
<tr class="even">
<td style="text-align: center;">display</td>
<td style="text-align: left;">character</td>
<td style="text-align: left;">Trial display: e.g., practice, trials, instructions, breaks.</td>
</tr>
<tr class="odd">
<td style="text-align: center;">answer</td>
<td style="text-align: left;">character</td>
<td style="text-align: left;">What is the correct answer? Left or Right.</td>
</tr>
<tr class="even">
<td style="text-align: center;">soa</td>
<td style="text-align: left;">double</td>
<td style="text-align: left;">Stimulus onset asynchrony. How long the images were shown for: 200ms or 500ms.</td>
</tr>
<tr class="odd">
<td style="text-align: center;">screen_name</td>
<td style="text-align: left;">character</td>
<td style="text-align: left;">Name of the screen: e.g., screen 1, fixation, stimuli, response.</td>
</tr>
<tr class="even">
<td style="text-align: center;">image_left</td>
<td style="text-align: left;">character</td>
<td style="text-align: left;">Name of the image file in the left area.</td>
</tr>
<tr class="odd">
<td style="text-align: center;">image_right</td>
<td style="text-align: left;">character</td>
<td style="text-align: left;">Name of the image file in the right area.</td>
</tr>
<tr class="even">
<td style="text-align: center;">dot_left</td>
<td style="text-align: left;">character</td>
<td style="text-align: left;">Name of the dot image file in the left area.</td>
</tr>
<tr class="odd">
<td style="text-align: center;">dot_right</td>
<td style="text-align: left;">character</td>
<td style="text-align: left;">Name of the dot image file in the right area.</td>
</tr>
<tr class="even">
<td style="text-align: center;">trial_type</td>
<td style="text-align: left;">character</td>
<td style="text-align: left;">Category of the trial: practice, neutral, nonsmoking, smoking.</td>
</tr>
<tr class="odd">
<td style="text-align: center;">block</td>
<td style="text-align: left;">double</td>
<td style="text-align: left;">Number of the trial block.</td>
</tr>
</tbody>
</table>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Try this
</div>
</div>
<div class="callout-body-container callout-body">
<p>Now we have introduced the two data sets, explore them using different methods we introduced. For example, opening the data objects as a tab to scroll around, explore with <code>glimpse()</code>, or even try plotting some of the variables to see what they look like using visualisation skills from Chapter 3.</p>
<p>Do you notice any variables that look the wrong type? Can you see any responses in there that are going to cause problems?</p>
</div>
</div>
</section></section><section id="wrangling-demographics" class="level2" data-number="15.3"><h2 data-number="15.3" class="anchored" data-anchor-id="wrangling-demographics">
<span class="header-section-number">15.3</span> Wrangling demographics</h2>
<p>For this kind of data, we recommend wrangling each file first, before joining them together. Starting with the demographics file, there are a few wrangling steps before the data are ready to summarise. We are going to show you a preview of the starting data set and the end product we are aiming for.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" aria-current="page">Raw data</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Wrangled data</a></li>
</ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 205
Columns: 20
$ participant_private_id &lt;dbl&gt; 631737, 631738, 631741, 631739, 631749, 631746,…
$ consent_given          &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…
$ age                    &lt;dbl&gt; 46, 54, 23, 34, 38, 19, 25, 21, 28, 35, 47, 45,…
$ cigarettes_per_week    &lt;chr&gt; "Yes", "Yes", "Yes", "Yes", "Yes", "Yes", "Yes"…
$ smoke_everyday         &lt;chr&gt; "Yes", "Yes", "Yes", "Yes", "Yes", "Yes", "Yes"…
$ past_four_weeks        &lt;chr&gt; "Yes", "Yes", "Yes", "Yes", "Yes", "Yes", "Yes"…
$ age_started_smoking    &lt;chr&gt; "12", "17", "17", "16", "15", "16", "22", "11",…
$ country_of_origin      &lt;chr&gt; "United Kingdom", "Germany", "Poland", "Austral…
$ cpd                    &lt;chr&gt; "6", "5", "10", "20", "10", "1", "6", "15", "12…
$ ethnicity              &lt;chr&gt; "White / Caucasian", "White / Caucasian", "Mixe…
$ gender                 &lt;chr&gt; "Female", "Female", "Male", "Female", "Female",…
$ last_cigarette         &lt;chr&gt; "60", "780", "90", "5", "60", "720", "10", "10"…
$ level_education        &lt;chr&gt; "Graduated University / College", "Graduated Un…
$ technical_issues       &lt;chr&gt; "No", "No", "No", "No", "No", "No", "No", "No",…
$ FTND_1                 &lt;dbl&gt; 2, 0, 0, 3, 3, 0, 1, 2, 1, 3, 2, 2, 2, 1, 2, 0,…
$ FTND_2                 &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 1, 0, 1, 0, 0,…
$ FTND_3                 &lt;dbl&gt; 1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0, 1, 0,…
$ FTND_4                 &lt;dbl&gt; 0, 0, 1, 1, 0, 1, 1, 0, 0, 0, 1, 1, 1, 0, 1, 1,…
$ FTND_5                 &lt;dbl&gt; 0, 0, 0, 1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 1, 0, 0,…
$ FTND_6                 &lt;dbl&gt; 0, 0, 0, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0,…</code></pre>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 205
Columns: 22
$ participant_private_id &lt;dbl&gt; 631737, 631738, 631741, 631739, 631749, 631746,…
$ consent_given          &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…
$ age                    &lt;dbl&gt; 46, 54, 23, 34, 38, 19, 25, 21, 28, 35, 47, 45,…
$ cigarettes_per_week    &lt;chr&gt; "Yes", "Yes", "Yes", "Yes", "Yes", "Yes", "Yes"…
$ smoke_everyday         &lt;chr&gt; "Yes", "Yes", "Yes", "Yes", "Yes", "Yes", "Yes"…
$ past_four_weeks        &lt;chr&gt; "Yes", "Yes", "Yes", "Yes", "Yes", "Yes", "Yes"…
$ age_started_smoking    &lt;int&gt; 12, 17, 17, 16, 15, 16, 22, 11, 18, 15, 18, 19,…
$ country_of_origin      &lt;fct&gt; United Kingdom, Germany, Poland, Australia, Spa…
$ cpd                    &lt;int&gt; 6, 5, 10, 20, 10, 1, 6, 15, 12, 20, 20, 15, 20,…
$ ethnicity              &lt;fct&gt; White / Caucasian, White / Caucasian, Mixed / m…
$ gender                 &lt;fct&gt; Female, Female, Male, Female, Female, Male, Fem…
$ last_cigarette         &lt;dbl&gt; 60, 780, 90, 5, 60, 720, 10, 10, 30, 0, 10, 30,…
$ level_education        &lt;fct&gt; Graduated University / College, Graduated Unive…
$ technical_issues       &lt;chr&gt; "No", "No", "No", "No", "No", "No", "No", "No",…
$ FTND_1                 &lt;dbl&gt; 2, 0, 0, 3, 3, 0, 1, 2, 1, 3, 2, 2, 2, 1, 2, 0,…
$ FTND_2                 &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 1, 0, 1, 0, 0,…
$ FTND_3                 &lt;dbl&gt; 1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0, 1, 0,…
$ FTND_4                 &lt;dbl&gt; 0, 0, 1, 1, 0, 1, 1, 0, 0, 0, 1, 1, 1, 0, 1, 1,…
$ FTND_5                 &lt;dbl&gt; 0, 0, 0, 1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 1, 0, 0,…
$ FTND_6                 &lt;dbl&gt; 0, 0, 0, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0,…
$ daily_smoker           &lt;fct&gt; Daily Smoker, Daily Smoker, Daily Smoker, Daily…
$ FTND_sum               &lt;dbl&gt; 3, 0, 2, 7, 5, 3, 3, 5, 4, 6, 7, 5, 6, 3, 4, 1,…</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Try this
</div>
</div>
<div class="callout-body-container callout-body">
<p>Before we give you a task list, try and switch between the raw data and the wrangled data. Make a list of all the differences you can see between the two data objects.</p>
<ol type="1">
<li><p>What type is each variable? Has it changed from the raw data?</p></li>
<li><p>Do we have any new variables? How could you create these from the variables available to you?</p></li>
</ol>
<p>For the variable <code>daily_smoker</code>, this has two levels which you cannot see in the preview: “Daily Smoker” and “Non-daily Smoker”. Which variable could this be based on?</p>
<p>Try and wrangle the data based on all the differences you notice to create a new object <code>demog_tidy</code>.</p>
<p>When you get as far as you can, check the task list which explains all the steps we applied, but not how to do them. Then, you can check the solution for our code.</p>
</div>
</div>
<section id="task-list" class="level3" data-number="15.3.1"><h3 data-number="15.3.1" class="anchored" data-anchor-id="task-list">
<span class="header-section-number">15.3.1</span> Task list</h3>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Show me the task list
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>These are all the steps we applied to create the wrangled data object:</p>
<ol type="1">
<li><p>Convert <code>age_started_smoking</code> to an integer (as age is a round number).</p></li>
<li><p>Convert <code>cpd</code> to an integer (as cigarettes per day is a round number). You will notice a warning about introducing an NA as some nonsense responses cannot be converted to a number.</p></li>
<li><p>Convert <code>country_of_origin</code> to a factor (as we have distinct categories).</p></li>
<li><p>Convert <code>ethnicity</code> to a factor (as we have distinct categories).</p></li>
<li><p>Convert <code>gender</code> to a factor (as we have distinct categories).</p></li>
<li><p>Convert <code>last_cigarette</code> to an integer (as time since last cigarette in minutes is a round number). You will notice a warning about introducing an NA as some nonsense responses cannot be converted to a number.</p></li>
<li><p>Convert <code>level_education</code> to a factor (as we have distinct categories).</p></li>
<li><p>Create a new variable <code>daily_smoker</code> by recoding an existing variable. The new variable should have two levels: “Daily Smoker” and “Non-daily Smoker”. In the process, convert <code>daily_smoker</code> to a factor (as we have distinct categories).</p></li>
<li><p>Create a new variable <code>FTND_sum</code> by taking the sum of the six items <code>FTND_1</code> to <code>FTND_6</code> per participant.</p></li>
</ol>
<p>For some advice, think of everything we covered in Chapters 4 to 6. How could you complete these steps as efficiently as possible? Could you string together functions using pipes, or do you need some intermediary objects? If it’s easier for you to complete steps with longer but accurate code, there is nothing wrong with that. You recognise ways to make your code more efficient over time.</p>
</div>
</div>
</div>
</section><section id="solution" class="level3" data-number="15.3.2"><h3 data-number="15.3.2" class="anchored" data-anchor-id="solution">
<span class="header-section-number">15.3.2</span> Solution</h3>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Show me the solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>This is the code we used to create the new object <code>demog_tidy</code> using the original object <code>demog</code>. As long as you get the same end result, the exact code is not important. In coding, there are multiple ways of getting to the same end result. Maybe you found a more efficient way to complete some of the steps compared to us. Maybe your code was a little longer. As long as it worked, that is the most important thing.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="co"># Using demog, create a new object demog_tidy</span></span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="co"># apply mutate to convert or create variables</span></span>
<span id="cb7-3"><a href="#cb7-3"></a>demog_tidy <span class="ot">&lt;-</span> demog <span class="sc">%&gt;%</span> </span>
<span id="cb7-4"><a href="#cb7-4"></a>  <span class="fu">mutate</span>(<span class="at">age_started_smoking =</span> <span class="fu">as.integer</span>(age_started_smoking),</span>
<span id="cb7-5"><a href="#cb7-5"></a>         <span class="at">cpd =</span> <span class="fu">as.integer</span>(cpd),</span>
<span id="cb7-6"><a href="#cb7-6"></a>         <span class="at">country_of_origin =</span> <span class="fu">as.factor</span>(country_of_origin),</span>
<span id="cb7-7"><a href="#cb7-7"></a>         <span class="at">ethnicity =</span> <span class="fu">as.factor</span>(ethnicity),</span>
<span id="cb7-8"><a href="#cb7-8"></a>         <span class="at">gender =</span> <span class="fu">as.factor</span>(gender),</span>
<span id="cb7-9"><a href="#cb7-9"></a>         <span class="at">last_cigarette =</span> <span class="fu">as.integer</span>(last_cigarette),</span>
<span id="cb7-10"><a href="#cb7-10"></a>         <span class="at">level_education =</span> <span class="fu">as.factor</span>(level_education),</span>
<span id="cb7-11"><a href="#cb7-11"></a>         <span class="co"># we used smoke_everyday to create our daily_smoker variable</span></span>
<span id="cb7-12"><a href="#cb7-12"></a>         <span class="at">daily_smoker =</span> <span class="fu">as.factor</span>(<span class="fu">case_match</span>(smoke_everyday,</span>
<span id="cb7-13"><a href="#cb7-13"></a>                                             <span class="st">"Yes"</span> <span class="sc">~</span> <span class="st">"Daily Smoker"</span>,</span>
<span id="cb7-14"><a href="#cb7-14"></a>                                             <span class="st">"No"</span> <span class="sc">~</span> <span class="st">"Non-daily Smoker"</span>)))</span>
<span id="cb7-15"><a href="#cb7-15"></a><span class="co"># To calculate the sum of the 6 FTND items, </span></span>
<span id="cb7-16"><a href="#cb7-16"></a><span class="co"># pivot longer, group by ID, then sum responses. </span></span>
<span id="cb7-17"><a href="#cb7-17"></a>FTND_sum <span class="ot">&lt;-</span> demog_tidy <span class="sc">%&gt;%</span> </span>
<span id="cb7-18"><a href="#cb7-18"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> FTND_1<span class="sc">:</span>FTND_6,</span>
<span id="cb7-19"><a href="#cb7-19"></a>               <span class="at">names_to =</span> <span class="st">"Item"</span>,</span>
<span id="cb7-20"><a href="#cb7-20"></a>               <span class="at">values_to =</span> <span class="st">"Response"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb7-21"><a href="#cb7-21"></a>  <span class="fu">group_by</span>(participant_private_id) <span class="sc">%&gt;%</span> </span>
<span id="cb7-22"><a href="#cb7-22"></a>  <span class="fu">summarise</span>(<span class="at">FTND_sum =</span> <span class="fu">sum</span>(Response))</span>
<span id="cb7-23"><a href="#cb7-23"></a></span>
<span id="cb7-24"><a href="#cb7-24"></a><span class="co"># Join this new column back to demog_tidy</span></span>
<span id="cb7-25"><a href="#cb7-25"></a>demog_tidy <span class="ot">&lt;-</span> demog_tidy <span class="sc">%&gt;%</span> </span>
<span id="cb7-26"><a href="#cb7-26"></a>  <span class="fu">inner_join</span>(<span class="at">y =</span> FTND_sum,</span>
<span id="cb7-27"><a href="#cb7-27"></a>             <span class="at">by =</span> <span class="st">"participant_private_id"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section></section><section id="wrangling-trials" class="level2" data-number="15.4"><h2 data-number="15.4" class="anchored" data-anchor-id="wrangling-trials">
<span class="header-section-number">15.4</span> Wrangling trials</h2>
<p>Turning to the trials file, there are a few wrangling steps and you will probably need the task list more for this part than you did for demographics. Some of the steps might not be as obvious but it is still important to compare the objects and see if you can identify the changes. We are going to show you a preview of the starting data set, and the end product we are aiming for in step 3.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">Original raw data</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Step 1</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-3" role="tab" aria-controls="tabset-2-3" aria-selected="false">Step 2</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-4" role="tab" aria-controls="tabset-2-4" aria-selected="false">Step 3</a></li>
</ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 244,847
Columns: 15
$ participant_private_id &lt;dbl&gt; 631737, 631737, 631737, 631737, 631737, 631737,…
$ trial_number           &lt;chr&gt; "BEGIN TASK", "1", "1", "1", "1", "2", "2", "2"…
$ reaction_time          &lt;dbl&gt; NA, 8007.015, 249.823, 199.765, 1999.671, 249.8…
$ response               &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
$ correct                &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ display                &lt;chr&gt; NA, "instructions", "practice", "practice", "pr…
$ answer                 &lt;chr&gt; NA, NA, "right", "right", "right", "left", "lef…
$ soa                    &lt;dbl&gt; NA, NA, 200, 200, 200, 200, 200, 200, 500, 500,…
$ screen_name            &lt;chr&gt; NA, "instructions_continue", "Screen 1", "Scree…
$ image_left             &lt;chr&gt; NA, NA, "p1.jpg", "p1.jpg", "p1.jpg", "p1.jpg",…
$ image_right            &lt;chr&gt; NA, NA, "p2.jpg", "p2.jpg", "p2.jpg", "p2.jpg",…
$ dot_left               &lt;chr&gt; NA, NA, "nodot.jpg", "nodot.jpg", "nodot.jpg", …
$ dot_right              &lt;chr&gt; NA, NA, "dot.jpg", "dot.jpg", "dot.jpg", "nodot…
$ trial_type             &lt;chr&gt; NA, NA, "practice", "practice", "practice", "pr…
$ block                  &lt;dbl&gt; NA, NA, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …</code></pre>
</div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 50,510
Columns: 15
$ participant_private_id &lt;dbl&gt; 631737, 631737, 631737, 631737, 631737, 631737,…
$ trial_number           &lt;chr&gt; "1", "2", "4", "5", "6", "7", "8", "9", "11", "…
$ reaction_time          &lt;dbl&gt; 1486.850, 720.640, 739.635, 668.730, 578.015, 5…
$ response               &lt;chr&gt; "right", "left", "right", "right", "left", "lef…
$ correct                &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…
$ display                &lt;chr&gt; "trials", "trials", "trials", "trials", "trials…
$ answer                 &lt;chr&gt; "right", "left", "right", "right", "left", "lef…
$ soa                    &lt;dbl&gt; 200, 500, 500, 200, 200, 200, 200, 200, 500, 50…
$ screen_name            &lt;chr&gt; "response", "response", "response", "response",…
$ image_left             &lt;chr&gt; "N14.jpg", "F14.jpg", "F14.jpg", "N4.jpg", "N19…
$ image_right            &lt;chr&gt; "F14.jpg", "N14.jpg", "N14.jpg", "F4.jpg", "F19…
$ dot_left               &lt;chr&gt; "nodot.jpg", "dot.jpg", "nodot.jpg", "nodot.jpg…
$ dot_right              &lt;chr&gt; "dot.jpg", "nodot.jpg", "dot.jpg", "dot.jpg", "…
$ trial_type             &lt;chr&gt; "smoking", "smoking", "nonsmoking", "smoking", …
$ block                  &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…</code></pre>
</div>
</div>
</div>
<div id="tabset-2-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-3-tab">
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 820
Columns: 5
$ participant_private_id &lt;dbl&gt; 631737, 631737, 631737, 631737, 631738, 631738,…
$ soa                    &lt;dbl&gt; 200, 200, 500, 500, 200, 200, 500, 500, 200, 20…
$ trial_type             &lt;chr&gt; "nonsmoking", "smoking", "nonsmoking", "smoking…
$ median_RT              &lt;dbl&gt; 444.6275, 452.8675, 456.8900, 449.6650, 638.000…
$ condition              &lt;chr&gt; "nonsmoking200", "smoking200", "nonsmoking500",…</code></pre>
</div>
</div>
</div>
<div id="tabset-2-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-4-tab">
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 205
Columns: 5
$ participant_private_id &lt;dbl&gt; 631737, 631738, 631739, 631741, 631746, 631748,…
$ nonsmoking200          &lt;dbl&gt; 444.6275, 638.0000, 516.5375, 410.8250, 375.272…
$ smoking200             &lt;dbl&gt; 452.8675, 703.5000, 529.1300, 433.3175, 367.365…
$ nonsmoking500          &lt;dbl&gt; 456.8900, 700.0000, 517.4775, 427.4100, 363.195…
$ smoking500             &lt;dbl&gt; 449.6650, 725.0000, 514.5050, 421.2250, 355.777…</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Try this
</div>
</div>
<div class="callout-body-container callout-body">
<p>Before we give you a task list, try and switch between the raw data and the three steps we took for wrangling the data. Make a list of all the differences you can see across the steps.</p>
<p>This part of the data wrangling is quite difficult if you are unfamiliar with dealing with response time tasks as you need to know what the end product should look like to work with later. Essentially, we want the median response time per participant per condition (across trial type and soa). There are rows we do not need, variables to create, and data to restructure. So, it takes all your wrangling skills you have learnt so far.</p>
<ol type="1">
<li><p>In step 1, how many observations do we have compared to the raw data? Knowing the design is important here, so look at the columns <code>correct</code>, <code>screen_name</code>, and <code>trial_type</code>. What function might reduce the number of observations like this?</p></li>
<li><p>In step 2, how many observations do we have compared to step 1? How many observations do we have per participant ID? What new variables do we have and how could you make them? Hint: for <code>condition</code>, we have not covered this, so look up a function called <code><a href="https://rdrr.io/r/base/paste.html">paste0()</a></code>.</p></li>
<li><p>In step 3, how many observations do we have compared to step 2? Have we removed any columns compared to step 2? Have the data been restructured?</p></li>
</ol>
<p>Try and wrangle the data based on all the differences you notice to create a new object <code>RT_wide</code> shown in step 3.</p>
<p>When you get as far as you can, check the task list which explains all the steps we applied, but not how to do them. Then, you can check the solution for our code.</p>
</div>
</div>
<section id="task-list-1" class="level3" data-number="15.4.1"><h3 data-number="15.4.1" class="anchored" data-anchor-id="task-list-1">
<span class="header-section-number">15.4.1</span> Task list</h3>
<p>For this part, we will separate the task list into the three steps in case you want to test yourself at each stage.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Show me the step 1 task list
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>These are all the steps we applied to create the wrangled data object:</p>
<ol type="1">
<li><p>Create an object <code>trials_tidy</code> using the original <code>trials</code> data.</p></li>
<li>
<p>Filter observations using three variables:</p>
<ul>
<li><p><code>screen_name</code> should only include “response”.</p></li>
<li><p><code>trial_type</code> should only include “nonsmoking” and “smoking”.</p></li>
<li><p><code>correct</code> should only include 1 (correct responses).</p></li>
</ul>
</li>
</ol>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-8-contents" aria-controls="callout-8" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Show me the step 2 task list
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-8" class="callout-8-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>These are all the steps we applied to create the wrangled data object:</p>
<ol type="1">
<li><p>Create an object <code>average_trials</code> using the <code>trials_tidy</code> object from step 1.</p></li>
<li><p>Group observations by three variables: <code>participant_private_id</code>, <code>soa</code>, and <code>trial_type</code>.</p></li>
<li><p>Summarise the data to create a new variable <code>median_RT</code> by calculating the median <code>reaction_time</code>.</p></li>
<li><p>Create a new variable called <code>condition</code> by combining the names of the <code>trial_type</code> and <code>soa</code> columns. Hint: this is a new concept, so try this <code>paste0(trial_type, soa)</code>. There are a few ways of dealing with this problem, but we are trying to avoid turning <code>soa</code> into variable names, as R does not like having variable names start with or be completely numbers.</p></li>
<li><p>Ungroup to avoid the groups carrying over into future objects.</p></li>
</ol>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-9-contents" aria-controls="callout-9" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Show me the step 3 task list
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-9" class="callout-9-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>These are all the steps we applied to create the wrangled data object:</p>
<ol type="1">
<li><p>Create an object <code>RT_wide</code> using the <code>average_trials</code> object from step 2.</p></li>
<li><p>Remove the variables <code>soa</code> and <code>trial_type</code> to avoid problems with restructuring. You could use the argument,</p></li>
<li><p>Restructure the data so your <code>condition</code> variable is spread across columns.</p></li>
</ol>
</div>
</div>
</div>
</section><section id="solution-1" class="level3" data-number="15.4.2"><h3 data-number="15.4.2" class="anchored" data-anchor-id="solution-1">
<span class="header-section-number">15.4.2</span> Solution</h3>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-10-contents" aria-controls="callout-10" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Show me the solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-10" class="callout-10-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>This is the code we used to create the new object <code>RT_wide</code> by following three steps. You could do it in two to combine the first two steps, but we wanted to make the change between filtering and grouping/summarising more obvious before showing you the task list.</p>
<p>Remember: As long as you get the same end result, the exact code is not important. In coding, there are multiple ways of getting to the same end result.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="co"># filter trials to focus on correct responses and key trials</span></span>
<span id="cb12-2"><a href="#cb12-2"></a>trials_tidy <span class="ot">&lt;-</span> trials <span class="sc">%&gt;%</span> </span>
<span id="cb12-3"><a href="#cb12-3"></a>  <span class="fu">filter</span>(screen_name <span class="sc">==</span> <span class="st">"response"</span>,</span>
<span id="cb12-4"><a href="#cb12-4"></a>         trial_type <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"nonsmoking"</span>, <span class="st">"smoking"</span>),</span>
<span id="cb12-5"><a href="#cb12-5"></a>         correct <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb12-6"><a href="#cb12-6"></a></span>
<span id="cb12-7"><a href="#cb12-7"></a><span class="co"># Calculate median RT per ID, SOA, and trial type</span></span>
<span id="cb12-8"><a href="#cb12-8"></a>average_trials <span class="ot">&lt;-</span> trials_tidy <span class="sc">%&gt;%</span> </span>
<span id="cb12-9"><a href="#cb12-9"></a>  <span class="fu">group_by</span>(participant_private_id, soa, trial_type) <span class="sc">%&gt;%</span> </span>
<span id="cb12-10"><a href="#cb12-10"></a>  <span class="fu">summarise</span>(<span class="at">median_RT =</span> <span class="fu">median</span>(reaction_time)) <span class="sc">%&gt;%</span> </span>
<span id="cb12-11"><a href="#cb12-11"></a>  <span class="fu">mutate</span>(<span class="at">condition =</span> <span class="fu">paste0</span>(trial_type, soa)) <span class="sc">%&gt;%</span> </span>
<span id="cb12-12"><a href="#cb12-12"></a>  <span class="fu">ungroup</span>() <span class="co"># ungroup to avoid it carrying over</span></span>
<span id="cb12-13"><a href="#cb12-13"></a></span>
<span id="cb12-14"><a href="#cb12-14"></a><span class="co"># Create wide data by making a new condition variable</span></span>
<span id="cb12-15"><a href="#cb12-15"></a><span class="co"># remove soa and trial type</span></span>
<span id="cb12-16"><a href="#cb12-16"></a><span class="co"># pivot wider for four columns per participant</span></span>
<span id="cb12-17"><a href="#cb12-17"></a>RT_wide <span class="ot">&lt;-</span> average_trials <span class="sc">%&gt;%</span> </span>
<span id="cb12-18"><a href="#cb12-18"></a>  <span class="fu">select</span>(<span class="sc">-</span>soa, <span class="sc">-</span>trial_type) <span class="sc">%&gt;%</span> </span>
<span id="cb12-19"><a href="#cb12-19"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> condition,</span>
<span id="cb12-20"><a href="#cb12-20"></a>              <span class="at">values_from =</span> median_RT)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section></section><section id="combining-objects-and-exclusion-criteria" class="level2" data-number="15.5"><h2 data-number="15.5" class="anchored" data-anchor-id="combining-objects-and-exclusion-criteria">
<span class="header-section-number">15.5</span> Combining objects and exclusion criteria</h2>
<p>Great work so far! You should now have two wrangled objects: <code>demog_tidy</code> and <code>RT_wide</code>. The next step is combining them and applying exclusion criteria from the study.</p>
<p>We are going to give you the task list immediately for this as you need to understand the methods to know what criteria to use. We still challenge you to complete the tasks though, before checking your answers against the code we used.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Task list
</div>
</div>
<div class="callout-body-container callout-body">
<p>Complete the following tasks to apply the final data wrangling steps:</p>
<ol type="1">
<li><p>Create a new object called <code>full_data</code> by joining your two data objects<code>demog_tidy</code> and <code>RT_wide</code> using a common identifier.</p></li>
<li>
<p>Filter observations using the following criteria:</p>
<ul>
<li><p><code>consent_given</code> should only include 1. We only want people who consented.</p></li>
<li><p><code>age</code> range only between 18 and 60. We do not want people younger or older than this range.</p></li>
<li><p><code>past_four_weeks</code> should only include “Yes”. We do not want people who have not smoked in the past four weeks.</p></li>
<li><p><code>technical_issues</code> should only include “No”. We do not want people who experienced technical issues during the study.</p></li>
</ul>
</li>
</ol>
</div>
</div>
<section id="solution-2" class="level3" data-number="15.5.1"><h3 data-number="15.5.1" class="anchored" data-anchor-id="solution-2">
<span class="header-section-number">15.5.1</span> Solution</h3>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-12-contents" aria-controls="callout-12" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Show me the solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-12" class="callout-12-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>This is the code we used to create the new object <code>full_data</code> by joining <code>demog_tidy</code> and <code>RT_wide</code>, and filtering observations based on our four criteria.</p>
<p>As long as you get the same end result, the exact code is not important. In coding, there are multiple ways of getting to the same end result.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="co"># create full_data by joining the two objects</span></span>
<span id="cb13-2"><a href="#cb13-2"></a><span class="co"># filter data by four criteria</span></span>
<span id="cb13-3"><a href="#cb13-3"></a>full_data <span class="ot">&lt;-</span> demog_tidy <span class="sc">%&gt;%</span> </span>
<span id="cb13-4"><a href="#cb13-4"></a>  <span class="fu">inner_join</span>(<span class="at">y =</span> RT_wide,</span>
<span id="cb13-5"><a href="#cb13-5"></a>             <span class="at">by =</span> <span class="st">"participant_private_id"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb13-6"><a href="#cb13-6"></a>  <span class="fu">filter</span>(consent_given <span class="sc">==</span> <span class="dv">1</span>,</span>
<span id="cb13-7"><a href="#cb13-7"></a>         age <span class="sc">&gt;=</span> <span class="dv">18</span> <span class="sc">&amp;</span> age <span class="sc">&lt;=</span> <span class="dv">60</span>,</span>
<span id="cb13-8"><a href="#cb13-8"></a>         past_four_weeks <span class="sc">==</span> <span class="st">"Yes"</span>,</span>
<span id="cb13-9"><a href="#cb13-9"></a>         technical_issues <span class="sc">==</span> <span class="st">"No"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section></section><section id="summarisingvisualising-your-data" class="level2" data-number="15.6"><h2 data-number="15.6" class="anchored" data-anchor-id="summarisingvisualising-your-data">
<span class="header-section-number">15.6</span> Summarising/visualising your data</h2>
<p>That is all the wrangling complete! Hopefully, this reinforces the role of reproducibility and data skills. If you did this in other software like Excel, you might not have a paper trail of all the steps. Like this, you have the full code to apply all the wrangling steps from raw data which you can run every time you need to, and edit it if you found a mistake or wanted to add something new. You can also come back to the file later to add more code (such as after Chapter 7 to plot more of the data, or Chapter 13 for some inferential statistics).</p>
<p>To finish the journey, we have some practice tasks for summarising and visualising the data. The whole purpose of <span class="citation" data-cites="bartlett_no_2022">Bartlett et al. (<a href="references.html#ref-bartlett_no_2022" role="doc-biblioref">2022</a>)</span> was to compare daily and non-daily smokers, so we will explore some of the key variables.</p>
<p>All of the questions are based on the final <code>full_data</code> object. If your answers differ, check the wrangling steps above. If you are really struggling to identify the difference, or you just wanted to complete these tasks, you can download a spreadsheet version of <code>full_data</code> here: <a href="data/Bartlett_full_data.csv">Bartlett_full_data.csv</a>.</p>
<section id="demographics" class="level3" data-number="15.6.1"><h3 data-number="15.6.1" class="anchored" data-anchor-id="demographics">
<span class="header-section-number">15.6.1</span> Demographics</h3>
<ol type="1">
<li>How many daily and non-daily smokers were there? There were <input class="webex-solveme nospaces" size="3" data-answer="[&quot;115&quot;]"> daily smokers and <input class="webex-solveme nospaces" size="2" data-answer="[&quot;63&quot;]"> non-daily smokers.</li>
</ol>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-13-contents" aria-controls="callout-13" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Show me the solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-13" class="callout-13-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>full_data <span class="sc">%&gt;%</span> </span>
<span id="cb14-2"><a href="#cb14-2"></a>  <span class="fu">count</span>(daily_smoker)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: left;">daily_smoker</th>
<th style="text-align: right;">n</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Daily Smoker</td>
<td style="text-align: right;">115</td>
</tr>
<tr class="even">
<td style="text-align: left;">Non-daily Smoker</td>
<td style="text-align: right;">63</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<ol start="2" type="1">
<li>To 2 decimal places, the mean age of <strong>all</strong> the participants was <input class="webex-solveme nospaces" size="5" data-answer="[&quot;31.07&quot;]"> (<em>SD</em> = <input class="webex-solveme nospaces" size="4" data-answer="[&quot;9.22&quot;]">).</li>
</ol>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-14-contents" aria-controls="callout-14" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Show me the solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-14" class="callout-14-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>full_data <span class="sc">%&gt;%</span> </span>
<span id="cb15-2"><a href="#cb15-2"></a>  <span class="fu">summarise</span>(<span class="at">mean_age =</span> <span class="fu">round</span>(<span class="fu">mean</span>(age), <span class="dv">2</span>),</span>
<span id="cb15-3"><a href="#cb15-3"></a>            <span class="at">sd_age =</span> <span class="fu">round</span>(<span class="fu">sd</span>(age), <span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: right;">mean_age</th>
<th style="text-align: right;">sd_age</th>
</tr></thead>
<tbody><tr class="odd">
<td style="text-align: right;">31.07</td>
<td style="text-align: right;">9.22</td>
</tr></tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<ol start="3" type="1">
<li>A histogram of all the participants’ ages looks like:</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="17-analysis-journey-1_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-15-contents" aria-controls="callout-15" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Show me the solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-15" class="callout-15-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>full_data <span class="sc">%&gt;%</span> </span>
<span id="cb16-2"><a href="#cb16-2"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> age)) <span class="sc">+</span> </span>
<span id="cb16-3"><a href="#cb16-3"></a>  <span class="fu">geom_histogram</span>() <span class="sc">+</span> </span>
<span id="cb16-4"><a href="#cb16-4"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">name =</span> <span class="st">"Age"</span>) <span class="sc">+</span> </span>
<span id="cb16-5"><a href="#cb16-5"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">"Frequency"</span>) <span class="sc">+</span> </span>
<span id="cb16-6"><a href="#cb16-6"></a>  <span class="fu">theme_classic</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<ol start="4" type="1">
<li>A bar plot of the gender breakdown of the sample would look like:</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="17-analysis-journey-1_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-16-contents" aria-controls="callout-16" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Show me the solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-16" class="callout-16-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a>full_data <span class="sc">%&gt;%</span> </span>
<span id="cb17-2"><a href="#cb17-2"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> gender)) <span class="sc">+</span> </span>
<span id="cb17-3"><a href="#cb17-3"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb17-4"><a href="#cb17-4"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">name =</span> <span class="st">"Gender"</span>) <span class="sc">+</span> </span>
<span id="cb17-5"><a href="#cb17-5"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">"Frequency"</span>) <span class="sc">+</span> </span>
<span id="cb17-6"><a href="#cb17-6"></a>  <span class="fu">theme_classic</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section><section id="measures-of-smoking-dependence" class="level3" data-number="15.6.2"><h3 data-number="15.6.2" class="anchored" data-anchor-id="measures-of-smoking-dependence">
<span class="header-section-number">15.6.2</span> Measures of smoking dependence</h3>
<ol start="5" type="1">
<li>To 2 decimal places, for daily smokers the mean number of cigarettes per day was <input class="webex-solveme nospaces" size="4" data-answer="[&quot;8.85&quot;]"> (<em>SD</em> = <input class="webex-solveme nospaces" size="4" data-answer="[&quot;6.51&quot;]">) and for non-daily smokers the mean number of cigarettes per day was <input class="webex-solveme nospaces" size="4" data-answer="[&quot;2.32&quot;]"> (<em>SD</em> = <input class="webex-solveme nospaces" size="4" data-answer="[&quot;2.69&quot;]">).</li>
</ol>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-17-contents" aria-controls="callout-17" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Show me the solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-17" class="callout-17-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a>full_data <span class="sc">%&gt;%</span> </span>
<span id="cb18-2"><a href="#cb18-2"></a>  <span class="fu">group_by</span>(daily_smoker) <span class="sc">%&gt;%</span> </span>
<span id="cb18-3"><a href="#cb18-3"></a>  <span class="fu">summarise</span>(<span class="at">mean_cpd =</span> <span class="fu">round</span>(<span class="fu">mean</span>(cpd, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="dv">2</span>),</span>
<span id="cb18-4"><a href="#cb18-4"></a>            <span class="at">sd_cpd =</span> <span class="fu">round</span>(<span class="fu">sd</span>(cpd, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: left;">daily_smoker</th>
<th style="text-align: right;">mean_cpd</th>
<th style="text-align: right;">sd_cpd</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Daily Smoker</td>
<td style="text-align: right;">8.85</td>
<td style="text-align: right;">6.51</td>
</tr>
<tr class="even">
<td style="text-align: left;">Non-daily Smoker</td>
<td style="text-align: right;">2.32</td>
<td style="text-align: right;">2.69</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<ol start="6" type="1">
<li>To 2 decimal places, for daily smokers the mean FTND sum score was <input class="webex-solveme nospaces" size="4" data-answer="[&quot;2.61&quot;]"> (<em>SD</em> = <input class="webex-solveme nospaces" size="3" data-answer="[&quot;2.2&quot;]">) and for non-daily smokers the mean number of cigarettes per day was <input class="webex-solveme nospaces" size="4" data-answer="[&quot;0.49&quot;,&quot;.49&quot;]"> (<em>SD</em> = <input class="webex-solveme nospaces" size="4" data-answer="[&quot;1.28&quot;]">).</li>
</ol>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-18-contents" aria-controls="callout-18" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Show me the solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-18" class="callout-18-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a>full_data <span class="sc">%&gt;%</span> </span>
<span id="cb19-2"><a href="#cb19-2"></a>  <span class="fu">group_by</span>(daily_smoker) <span class="sc">%&gt;%</span> </span>
<span id="cb19-3"><a href="#cb19-3"></a>  <span class="fu">summarise</span>(<span class="at">mean_FTND =</span> <span class="fu">round</span>(<span class="fu">mean</span>(FTND_sum, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="dv">2</span>),</span>
<span id="cb19-4"><a href="#cb19-4"></a>            <span class="at">sd_FTND =</span> <span class="fu">round</span>(<span class="fu">sd</span>(FTND_sum, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: left;">daily_smoker</th>
<th style="text-align: right;">mean_FTND</th>
<th style="text-align: right;">sd_FTND</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Daily Smoker</td>
<td style="text-align: right;">2.61</td>
<td style="text-align: right;">2.20</td>
</tr>
<tr class="even">
<td style="text-align: left;">Non-daily Smoker</td>
<td style="text-align: right;">0.49</td>
<td style="text-align: right;">1.28</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
</section><section id="attentional-bias" class="level3" data-number="15.6.3"><h3 data-number="15.6.3" class="anchored" data-anchor-id="attentional-bias">
<span class="header-section-number">15.6.3</span> Attentional bias</h3>
<ol start="7" type="1">
<li>
<p>Before answering the following questions, complete one extra data wrangling step to create difference scores where positive values mean attentional bias towards smoking images (faster responses to smoking compared to non-smoking stimuli):</p>
<ul>
<li><p>Create a new variable called <code>difference_200</code> by calculating <code>nonsmoking200</code> - <code>smoking200</code>.</p></li>
<li><p>Create a new variable called <code>difference_500</code> by by calculating <code>nonsmoking500</code> - <code>smoking500</code>.</p></li>
</ul>
</li>
</ol>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-19-contents" aria-controls="callout-19" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Show me the solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-19" class="callout-19-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>full_data <span class="ot">&lt;-</span> full_data <span class="sc">%&gt;%</span> </span>
<span id="cb20-2"><a href="#cb20-2"></a>  <span class="fu">mutate</span>(<span class="at">difference_200 =</span> nonsmoking200 <span class="sc">-</span> smoking200,</span>
<span id="cb20-3"><a href="#cb20-3"></a>         <span class="at">difference_500 =</span> nonsmoking500 <span class="sc">-</span> smoking500)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<ol start="8" type="1">
<li>To 2 decimal places, the mean difference in attentional bias in the 200ms condition was <input class="webex-solveme nospaces" size="4" data-answer="[&quot;1.25&quot;]"> (<em>SD</em> = <input class="webex-solveme nospaces" size="5" data-answer="[&quot;23.91&quot;]">) for daily smokers and <input class="webex-solveme nospaces" size="5" data-answer="[&quot;-2.74&quot;]"> (<em>SD</em> = <input class="webex-solveme nospaces" size="5" data-answer="[&quot;21.27&quot;]">) for non-daily smokers.</li>
</ol>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-20-contents" aria-controls="callout-20" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Show me the solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-20" class="callout-20-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a>full_data <span class="sc">%&gt;%</span> </span>
<span id="cb21-2"><a href="#cb21-2"></a>  <span class="fu">group_by</span>(daily_smoker) <span class="sc">%&gt;%</span> </span>
<span id="cb21-3"><a href="#cb21-3"></a>  <span class="fu">summarise</span>(<span class="at">mean_bias_200 =</span> <span class="fu">round</span>(<span class="fu">mean</span>(difference_200, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="dv">2</span>),</span>
<span id="cb21-4"><a href="#cb21-4"></a>            <span class="at">sd_bias_200 =</span> <span class="fu">round</span>(<span class="fu">sd</span>(difference_200, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: left;">daily_smoker</th>
<th style="text-align: right;">mean_bias_200</th>
<th style="text-align: right;">sd_bias_200</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Daily Smoker</td>
<td style="text-align: right;">1.25</td>
<td style="text-align: right;">23.91</td>
</tr>
<tr class="even">
<td style="text-align: left;">Non-daily Smoker</td>
<td style="text-align: right;">-2.74</td>
<td style="text-align: right;">21.27</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<ol start="9" type="1">
<li>To 2 decimal places, the mean difference in attentional bias in the 500ms condition was <input class="webex-solveme nospaces" size="4" data-answer="[&quot;0.76&quot;,&quot;.76&quot;]"> (<em>SD</em> = <input class="webex-solveme nospaces" size="5" data-answer="[&quot;21.66&quot;]">) for daily smokers and <input class="webex-solveme nospaces" size="5" data-answer="[&quot;-1.19&quot;]"> (<em>SD</em> = <input class="webex-solveme nospaces" size="5" data-answer="[&quot;14.51&quot;]">) for non-daily smokers.</li>
</ol>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-21-contents" aria-controls="callout-21" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Show me the solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-21" class="callout-21-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a>full_data <span class="sc">%&gt;%</span> </span>
<span id="cb22-2"><a href="#cb22-2"></a>  <span class="fu">group_by</span>(daily_smoker) <span class="sc">%&gt;%</span> </span>
<span id="cb22-3"><a href="#cb22-3"></a>  <span class="fu">summarise</span>(<span class="at">mean_bias_500 =</span> <span class="fu">round</span>(<span class="fu">mean</span>(difference_500, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="dv">2</span>),</span>
<span id="cb22-4"><a href="#cb22-4"></a>            <span class="at">sd_bias_500 =</span> <span class="fu">round</span>(<span class="fu">sd</span>(difference_500, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: left;">daily_smoker</th>
<th style="text-align: right;">mean_bias_500</th>
<th style="text-align: right;">sd_bias_500</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Daily Smoker</td>
<td style="text-align: right;">0.76</td>
<td style="text-align: right;">21.66</td>
</tr>
<tr class="even">
<td style="text-align: left;">Non-daily Smoker</td>
<td style="text-align: right;">-1.19</td>
<td style="text-align: right;">14.51</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<p>If you are currently completing this after Chapter 6, we have not covered visualising continuous data or inferential statistics yet. Try coming back to these tasks to compare these measures when you have finished Chapter 7 for more advanced visualisation and Chapter 13 for factorial ANOVA.</p>
<p>A difference score of 0 means no bias towards smoking or non-smoking images. So, you can see the paper did not find either group showed much attentional bias towards smoking images nor much difference between the groups, hence why it was published in the <em>Journal of Trial and Error</em>.</p>
</section></section><section id="conclusion" class="level2" data-number="15.7"><h2 data-number="15.7" class="anchored" data-anchor-id="conclusion">
<span class="header-section-number">15.7</span> Conclusion</h2>
<p>Well done! Hopefully you recognised how far your skills have come to be able to do this independently, regardless of how many hints you needed.</p>
<p>These are real skills people use in research. If you are curious, <span class="citation" data-cites="bartlett_no_2022">Bartlett et al. (<a href="references.html#ref-bartlett_no_2022" role="doc-biblioref">2022</a>)</span> shared their code as a reproducible manuscrupt, so you can see all the wrangling steps they completed by looking at <a href="https://osf.io/xpgt3" target="_blank">this file on the Open Science Framework</a>. We did not include all of them here as there are concepts like outliers we had not covered by Chapter 6.</p>


<div id="refs" class="references csl-bib-body hanging-indent" data-line-spacing="2" role="list" style="display: none">
<div id="ref-bartlett_no_2022" class="csl-entry" role="listitem">
Bartlett, J. E., Jenks, R., &amp; Wilson, N. (2022). No <span>Meaningful</span> <span>Difference</span> in <span>Attentional</span> <span>Bias</span> <span>Between</span> <span>Daily</span> and <span>Non</span>-<span>Daily</span> <span>Smokers</span>. <em>Journal of Trial &amp; Error</em>. <a href="https://doi.org/10.36850/e11">https://doi.org/10.36850/e11</a>
</div>
</div>
</section></main><!-- /main --><script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  var t = document.getElementsByClassName("webex-total_correct");
  for (var i = 0; i < t.length; i++) {
    p = t[i].parentElement;
    var correct = p.getElementsByClassName("webex-correct").length;
    var solvemes = p.getElementsByClassName("webex-solveme").length;
    var radiogroups = p.getElementsByClassName("webex-radiogroup").length;
    var selects = p.getElementsByClassName("webex-select").length;

    t[i].innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");

  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* check answers */
check_func = function() {
  console.log("webex: check answers");

  var cl = this.parentElement.classList;
  if (cl.contains('unchecked')) {
    cl.remove("unchecked");
    this.innerHTML = "Hide Answers";
  } else {
    cl.add("unchecked");
    this.innerHTML = "Show Answers";
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");

  var cl = this.classList

  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;

  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }

  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

window.onload = function() {
  console.log("webex onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  var check_sections = document.getElementsByClassName("webex-check");
  console.log("check:", check_sections.length);
  for (var i = 0; i < check_sections.length; i++) {
    check_sections[i].classList.add("unchecked");

    let btn = document.createElement("button");
    btn.innerHTML = "Show Answers";
    btn.classList.add("webex-check-button");
    btn.onclick = check_func;
    check_sections[i].appendChild(btn);

    let spn = document.createElement("span");
    spn.classList.add("webex-total_correct");
    check_sections[i].appendChild(spn);
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;

    solveme[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }

  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
    selects[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  update_total_correct();
}

</script><script>
// open rdrr links externally ----

var exlinks = document.querySelectorAll("a[href^='https://rdrr.io']");
var exlink_func = function(){
  window.open(this.href);
  return false;
};
for (var i = 0; i < exlinks.length; i++) {
    exlinks[i].addEventListener('click', exlink_func, false);
}

// visible second sidebar in mobile ----

function move_sidebar() {
  var toc = document.getElementById("TOC");
  var small_sidebar = document.querySelector("#quarto-sidebar .sidebar-menu-container");
  var right_sidebar = document.getElementById("quarto-margin-sidebar");

  if (window.innerWidth < 768) {
    small_sidebar.append(toc);
  } else {
    right_sidebar.append(toc);
  }
}
move_sidebar();
window.onresize = move_sidebar;
</script><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./16-analysis-journeys.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Data Analysis Journeys</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./18-analysis-journey-2.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Analysis Journey 2: Simple Linear Regression</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">CC-BY (2024) James Bartlett &amp; Wil Toivo</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>


</body></html>