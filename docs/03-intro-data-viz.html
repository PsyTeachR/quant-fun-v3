<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="description" content="Materials for the MSc Conversion Research Methods 1 and 2 courses at the University of Glasgow School of Psychology &amp; Neuroscience.">
<title>Fundamentals of Quantitative Analysis - 3&nbsp; Introduction to Data Visualisation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./04-wrangling-1.html" rel="next">
<link href="./02-starting-with-data.html" rel="prev">
<link href="./images/logos/logo.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.13.0/css/all.css">
<link rel="stylesheet" href="include/booktem.css">
<link rel="stylesheet" href="include/webex.css">
<link rel="stylesheet" href="include/glossary.css">
<link rel="stylesheet" href="include/style.css">
</head>
<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./03-intro-data-viz.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Introduction to Data Visualisation</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Fundamentals of Quantitative Analysis</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/BartlettJE/quant-fun-v3/" rel="" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
<li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=%7Curl%7C">
              <i class="bi bi-bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=%7Curl%7C">
              <i class="bi bi-bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=%7Curl%7C">
              <i class="bi bi-bi-linkedin pe-1"></i>
            LinkedIn
            </a>
          </li>
      </ul>
</div>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00-foreword.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">How to use this book</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-programming-basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction to programming with R/R Studio</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-starting-with-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Creating Reproducible Documents</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-intro-data-viz.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Introduction to Data Visualisation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-wrangling-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Data wrangling 1: Join, select, and mutate</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-wrangling-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Data wrangling 2: Filter and summarise</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-wrangling-3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Data Wrangling 3: Pivots and Pipes</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-more-visualisation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Scatterplots, boxplots, and violin-boxplots</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-lm-continuous.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Regression with one continuous predictor</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-lm-categorical.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Regression with one categorical predictor</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-power.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Statistical Power and Effect Sizes</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-screening-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Screening Data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-anova.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">One-way ANOVA</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13-factorial-anova.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Factorial ANOVA</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14-multiple-regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Multiple Regression</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./16-analysis-journeys.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Analysis Journeys</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./17-analysis-journey-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Analysis Journey 1: Data Wrangling</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./18-analysis-journey-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Analysis Journey 2: Simple Linear Regression</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix-a2-additional-learning-resources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Additional Resources</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix-a3-How-to-cite-R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Citing R and RStudio</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix-b-symbols.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">Symbols</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix-d-probability.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">D</span>&nbsp; <span class="chapter-title">Probability</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix-y-license.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">License</span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li>
<a href="#chapter-preparation" id="toc-chapter-preparation" class="nav-link active" data-scroll-target="#chapter-preparation"><span class="header-section-number">3.1</span> Chapter preparation</a>
  <ul class="collapse">
<li><a href="#introduction-to-the-data-set" id="toc-introduction-to-the-data-set" class="nav-link" data-scroll-target="#introduction-to-the-data-set"><span class="header-section-number">3.1.1</span> Introduction to the data set</a></li>
  <li><a href="#organising-your-files-and-project-for-the-chapter" id="toc-organising-your-files-and-project-for-the-chapter" class="nav-link" data-scroll-target="#organising-your-files-and-project-for-the-chapter"><span class="header-section-number">3.1.2</span> Organising your files and project for the chapter</a></li>
  </ul>
</li>
  <li>
<a href="#loading-the-tidyverse-and-reading-data-files" id="toc-loading-the-tidyverse-and-reading-data-files" class="nav-link" data-scroll-target="#loading-the-tidyverse-and-reading-data-files"><span class="header-section-number">3.2</span> Loading the <code>tidyverse</code> and reading data files</a>
  <ul class="collapse">
<li><a href="#activity-1---loading-the-tidyverse-package" id="toc-activity-1---loading-the-tidyverse-package" class="nav-link" data-scroll-target="#activity-1---loading-the-tidyverse-package"><span class="header-section-number">3.2.1</span> Activity 1 - Loading the <code>tidyverse</code> package</a></li>
  <li><a href="#activity-2---reading-data-files-using-read_csv" id="toc-activity-2---reading-data-files-using-read_csv" class="nav-link" data-scroll-target="#activity-2---reading-data-files-using-read_csv"><span class="header-section-number">3.2.2</span> Activity 2 - Reading data files using <code>read_csv()</code></a></li>
  <li><a href="#activity-3---wrangling-the-two-data-sets" id="toc-activity-3---wrangling-the-two-data-sets" class="nav-link" data-scroll-target="#activity-3---wrangling-the-two-data-sets"><span class="header-section-number">3.2.3</span> Activity 3 - Wrangling the two data sets</a></li>
  <li><a href="#activity-4---exploring-the-data-set" id="toc-activity-4---exploring-the-data-set" class="nav-link" data-scroll-target="#activity-4---exploring-the-data-set"><span class="header-section-number">3.2.4</span> Activity 4 - Exploring the data set</a></li>
  </ul>
</li>
  <li><a href="#ggplot2-and-the-layer-system" id="toc-ggplot2-and-the-layer-system" class="nav-link" data-scroll-target="#ggplot2-and-the-layer-system"><span class="header-section-number">3.3</span> <code>ggplot2</code> and the layer system</a></li>
  <li>
<a href="#histograms-and-density-plots" id="toc-histograms-and-density-plots" class="nav-link" data-scroll-target="#histograms-and-density-plots"><span class="header-section-number">3.4</span> Histograms and density plots</a>
  <ul class="collapse">
<li><a href="#step-1-start-with-the-ggplot-function" id="toc-step-1-start-with-the-ggplot-function" class="nav-link" data-scroll-target="#step-1-start-with-the-ggplot-function"><span class="header-section-number">3.4.1</span> Step 1: Start with the <code>ggplot</code> function</a></li>
  <li><a href="#step-2-add-the-geom_histogram-layer" id="toc-step-2-add-the-geom_histogram-layer" class="nav-link" data-scroll-target="#step-2-add-the-geom_histogram-layer"><span class="header-section-number">3.4.2</span> Step 2: Add the geom_histogram layer</a></li>
  <li><a href="#step-3-edit-the-histogram-bins" id="toc-step-3-edit-the-histogram-bins" class="nav-link" data-scroll-target="#step-3-edit-the-histogram-bins"><span class="header-section-number">3.4.3</span> Step 3: Edit the histogram bins</a></li>
  <li><a href="#step-4-edit-the-axis-names" id="toc-step-4-edit-the-axis-names" class="nav-link" data-scroll-target="#step-4-edit-the-axis-names"><span class="header-section-number">3.4.4</span> Step 4: Edit the axis names</a></li>
  <li><a href="#step-5-change-the-plot-theme" id="toc-step-5-change-the-plot-theme" class="nav-link" data-scroll-target="#step-5-change-the-plot-theme"><span class="header-section-number">3.4.5</span> Step 5: Change the plot theme</a></li>
  <li><a href="#switch-the-geom-layer" id="toc-switch-the-geom-layer" class="nav-link" data-scroll-target="#switch-the-geom-layer"><span class="header-section-number">3.4.6</span> Switch the geom layer</a></li>
  <li><a href="#activity-5---apply-your-plotting-skills-to-a-new-variable" id="toc-activity-5---apply-your-plotting-skills-to-a-new-variable" class="nav-link" data-scroll-target="#activity-5---apply-your-plotting-skills-to-a-new-variable"><span class="header-section-number">3.4.7</span> Activity 5 - Apply your plotting skills to a new variable</a></li>
  </ul>
</li>
  <li>
<a href="#barplots" id="toc-barplots" class="nav-link" data-scroll-target="#barplots"><span class="header-section-number">3.5</span> Barplots</a>
  <ul class="collapse">
<li><a href="#introviz-a2" id="toc-introviz-a2" class="nav-link" data-scroll-target="#introviz-a2"><span class="header-section-number">3.5.1</span> Activity 6 - Covert to factors</a></li>
  <li><a href="#introviz-a3" id="toc-introviz-a3" class="nav-link" data-scroll-target="#introviz-a3"><span class="header-section-number">3.5.2</span> Activity 7 - Create a bar plot</a></li>
  <li><a href="#activity-8---edit-the-axis-labels" id="toc-activity-8---edit-the-axis-labels" class="nav-link" data-scroll-target="#activity-8---edit-the-axis-labels"><span class="header-section-number">3.5.3</span> Activity 8 - Edit the axis labels</a></li>
  <li><a href="#activity-9---apply-your-plotting-skills-to-a-new-variable" id="toc-activity-9---apply-your-plotting-skills-to-a-new-variable" class="nav-link" data-scroll-target="#activity-9---apply-your-plotting-skills-to-a-new-variable"><span class="header-section-number">3.5.4</span> Activity 9 - Apply your plotting skills to a new variable</a></li>
  </ul>
</li>
  <li>
<a href="#saving-your-figures" id="toc-saving-your-figures" class="nav-link" data-scroll-target="#saving-your-figures"><span class="header-section-number">3.6</span> Saving your Figures</a>
  <ul class="collapse">
<li><a href="#introviz-a6" id="toc-introviz-a6" class="nav-link" data-scroll-target="#introviz-a6"><span class="header-section-number">3.6.1</span> Activity 10 - Saving your last plot</a></li>
  <li><a href="#saving-a-specific-plot" id="toc-saving-a-specific-plot" class="nav-link" data-scroll-target="#saving-a-specific-plot"><span class="header-section-number">3.6.2</span> Saving a specific plot</a></li>
  </ul>
</li>
  <li>
<a href="#test-yourself" id="toc-test-yourself" class="nav-link" data-scroll-target="#test-yourself"><span class="header-section-number">3.7</span> Test Yourself</a>
  <ul class="collapse">
<li><a href="#knowledge-check" id="toc-knowledge-check" class="nav-link" data-scroll-target="#knowledge-check"><span class="header-section-number">3.7.1</span> Knowledge check</a></li>
  <li><a href="#error-mode-3" id="toc-error-mode-3" class="nav-link" data-scroll-target="#error-mode-3"><span class="header-section-number">3.7.2</span> Error mode</a></li>
  </ul>
</li>
  <li><a href="#words-from-this-chapter" id="toc-words-from-this-chapter" class="nav-link" data-scroll-target="#words-from-this-chapter"><span class="header-section-number">3.8</span> Words from this Chapter</a></li>
  <li><a href="#end-of-chapter" id="toc-end-of-chapter" class="nav-link" data-scroll-target="#end-of-chapter"><span class="header-section-number">3.9</span> End of chapter</a></li>
  </ul><div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/BartlettJE/quant-fun-v3/edit/main/03-intro-data-viz.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/BartlettJE/quant-fun-v3/issues/new" class="toc-action">Report an issue</a></p><p><a href="https://github.com/BartlettJE/quant-fun-v3/blob/main/03-intro-data-viz.qmd" class="toc-action">View source</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title"><span id="c03-intro-data-viz" class="quarto-section-identifier"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Introduction to Data Visualisation</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header><p>In this chapter, we introduce you to <a class="glossary" title="A graphical representation of your data set.">data visualisation</a>. Visualising our data and the relationships between our variables is an incredibly useful and important skill.</p>
<p>It is important for <strong>you</strong> before you conduct any statistical analyses or present any summary statistics. We should always visualise our data as it is a quick and easy way to check our data make sense and identify any unusual trends. It is also important for <strong>others</strong> who read your work. Data visualisation can honestly present the features of our data to anyone who reads our research and provides a faster overview of our findings than reading a wall of numbers.</p>
<p>Across several chapters, we introduce you to the extremely flexible <code>ggplot2</code> package for data visualisation as part of the <code>tidyverse</code> family. In two or three lines of code, you can create plots like <a href="#fig-ggplotdemo">Figure&nbsp;<span>3.1</span></a> for exploratory data analysis. With a few extra lines, you can create publication quality plots that could go into a report.</p>
<p>In this chapter, we introduce you to the <code>ggplot2</code> system of creating plots and cover histograms and bar plots. In future chapters, we cover different types of plot to communicate more complex data and analyses.</p>
<p><strong>Chapter Intended Learning Outcomes (ILOs)</strong></p>
<p>By the end of this chapter, you will be able to:</p>
<ul>
<li><p>Read data files into R/RStudio.</p></li>
<li><p>Understand the <code>ggplot2</code> layering system of creating plots.</p></li>
<li><p>Create and edit histograms to visualise the frequency of observations collated into bins.</p></li>
<li><p>Create and edit barplots to visualise the frequency of different categories.</p></li>
<li><p>Save plots as an image to use in reports or presentations.</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-ggplotdemo" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="03-intro-data-viz_files/figure-html/fig-ggplotdemo-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;3.1: Preview of the kind of plots you can quickly create using the ggplot2 package. On the left, a histogram of responses to a happiness questionnaire. On the right, a bar plot showing the frequency men and women in the study.</figcaption></figure>
</div>
</div>
</div>
<section id="chapter-preparation" class="level2" data-number="3.1"><h2 data-number="3.1" class="anchored" data-anchor-id="chapter-preparation">
<span class="header-section-number">3.1</span> Chapter preparation</h2>
<section id="introduction-to-the-data-set" class="level3" data-number="3.1.1"><h3 data-number="3.1.1" class="anchored" data-anchor-id="introduction-to-the-data-set">
<span class="header-section-number">3.1.1</span> Introduction to the data set</h3>
<p>From now on, we are going to use different data sets from psychology to develop and practice your data skills. This will prepare you for working with different kinds of psychology data and introduce you to different kinds of research questions they might ask. For this chapter, we are using open data from <span class="citation" data-cites="woodworth_data_2018">Woodworth et al. (<a href="references.html#ref-woodworth_data_2018" role="doc-biblioref">2018</a>)</span>. The abstract of their article is:</p>
<blockquote class="blockquote">
<p>We present two datasets. The first dataset comprises 992 point-in-time records of self-reported happiness and depression in 295 participants, each assigned to one of four intervention groups, in a study of the effect of web-based positive-psychology interventions. Each point-in-time measurement consists of a participant’s responses to the 24 items of the Authentic Happiness Inventory and to the 20 items of the Center for Epidemiological Studies Depression (CES-D) scale. Measurements were sought at the time of each participant’s enrolment in the study and on five subsequent occasions, the last being approximately 189 days after enrolment. The second dataset contains basic demographic information about each participant.</p>
</blockquote>
<p>In summary, we have two files containing demographic information about participants and measurements of two scales on happiness and depression:</p>
<ul>
<li><p>The Authentic Happiness Inventory (AHI),</p></li>
<li><p>The Center for Epidemiological Studies Depression (CES-D) scale.</p></li>
</ul></section><section id="organising-your-files-and-project-for-the-chapter" class="level3" data-number="3.1.2"><h3 data-number="3.1.2" class="anchored" data-anchor-id="organising-your-files-and-project-for-the-chapter">
<span class="header-section-number">3.1.2</span> Organising your files and project for the chapter</h3>
<p>Before we can get started, you need to organise your files and project for the chapter, so your working directory is in order. If you need a refresher of this process, you can look back over Chapter 2 - <a href="02-starting-with-data.html#02-projects">File structure, working directories, and R Projects</a>.</p>
<ol type="1">
<li><p>In your folder for research methods and the book <code>ResearchMethods1_2/Quant_Fundamentals</code>, create a new folder called <code>Chapter_03_intro_data_viz</code>. Within <code>Chapter_03_intro_data_viz</code>, create two new folders called <code>data</code> and <code>figures</code>.</p></li>
<li><p>Create an R Project for <code>Chapter_03_intro_data_viz</code> as an existing directory for your chapter folder. This should now be your working directory.</p></li>
<li><p>Create a new R Markdown document and give it a sensible title describing the chapter, such as <code>03 Introduction to Data Visualisation</code>. Delete everything below line 10 so you have a blank file to work with and save the file in your <code>Chapter_03_intro_data_viz</code> folder.</p></li>
<li><p>Download these two data files which we used at the end of Chapter 2. Data file one: <a href="data/ahi-cesd.csv">ahi-cesd.csv</a>. Data file two: <a href="data/participant_info.csv">participant-info.csv</a>. Right click the links and select “save link as”, or clicking the links will save the files to your Downloads. Make sure that both files are saved as “.csv”. Do not open them on your machine as often other software like Excel can change setting and ruin the files. Save or copy the file to your <code>data/</code> folder within <code>Chapter_03_intro_data_viz</code>.</p></li>
</ol>
<p>You are now ready to start working on the chapter!</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Reminder of file management if you use the online server
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>If we support you to use the online University of Glasgow R Server, working with files is a little different. If you downloaded R / RStudio to your own computer or you are using one of the library/lab computers, please ignore this section.</p>
<p>The main disadvantage to using the R server is that you will need create folders on the server and then upload and download any files you are working on to and from the server. Please be aware that <strong>there is no link between your computer and the R server</strong>. If you change files on the server, they will not appear on your computer until you download them from the server, and you need to be very careful when you submit your assessment files that you are submitting the right file. This is the main reason we recommend installing R / RStudio on your computer wherever possible.</p>
<p>Going forward throughout this book, if you are using the server, you will need to follow an extra step where you also upload them to the sever. As an example:</p>
<ol type="1">
<li><p>Log on to the <strong>R server</strong> using the link we provided to you.</p></li>
<li><p>In the file pane, click <code>New folder</code> and create the same structure we demonstrated above.</p></li>
<li><p>Download these two data files which we used at the end of Chapter 2. Data file one: <a href="data/ahi-cesd.csv">ahi-cesd.csv</a>. Data file two: <a href="data/participant_info.csv">participant-info.csv</a>. Save the two files into the <code>data</code> folder you created for chapter 3. To download a file from this book, right click the link and select “save link as”. Make sure that both files are saved as “.csv”. Do not open them on your machine as often other software like Excel can change setting and ruin the files.</p></li>
<li><p>Now that the files are stored on your computer, go to RStudio on the server and click <code>Upload</code> then <code>Browse</code> and choose the folder for the chapter you are working on.</p></li>
<li><p>Click <code>Choose file</code> and go and find the data you want to upload.</p></li>
</ol>
</div>
</div>
</div>
</section></section><section id="loading-the-tidyverse-and-reading-data-files" class="level2" data-number="3.2"><h2 data-number="3.2" class="anchored" data-anchor-id="loading-the-tidyverse-and-reading-data-files">
<span class="header-section-number">3.2</span> Loading the <code>tidyverse</code> and reading data files</h2>
<section id="activity-1---loading-the-tidyverse-package" class="level3" data-number="3.2.1"><h3 data-number="3.2.1" class="anchored" data-anchor-id="activity-1---loading-the-tidyverse-package">
<span class="header-section-number">3.2.1</span> Activity 1 - Loading the <code>tidyverse</code> package</h3>
<p>For everything we do in this chapter and almost every chapter from now, we need to use the <strong><a href="https://psyteachr.github.io/glossary/t#tidyverse" target="_blank" class="glossary" title="A set of R packages that help you create and work with tidy data">tidyverse</a></strong> package. The <code>tidyverse</code> is a package of packages, containing a kind of ecosystem of functions that work together for <strong><a href="https://psyteachr.github.io/glossary/d#data-wrangling" target="_blank" class="glossary" title="The process of preparing data for visualisation and statistical analysis.">data wrangling</a></strong>, <strong><a href="https://psyteachr.github.io/glossary/d#descriptive" target="_blank" class="glossary" title="Statistics that describe an aspect of data (e.g., mean, median, mode, variance, range)">descriptive</a></strong> statistics, and visualisation. So let’s load that package into our library using the <code><a href="https://rdrr.io/r/base/library.html">library()</a></code> function.</p>
<p>To load the <code>tidyverse</code>, below line 10 of your RMarkdown document, create a code chunk, type the following code into your code chunk, and run the code:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Remember that sometimes in the <strong><a href="https://psyteachr.github.io/glossary/c#console" target="_blank" class="glossary" title="The pane in RStudio where you can type in commands and view output messages.">console</a></strong> or below your code chunk, you will see information about the package you have loaded. If you see an error message, be sure to read it and try to identify what the problem is. For example, if you are working on your own computer, have you installed <code>tidyverse</code> so R/RStudio can access it? Are there any spelling mistakes in the function or package?</p>
<p>Remember though, not all messages are errors, <code>tidyverse</code> explains what packages it loaded and highlights function name clashes. See <a href="01-programming-basics.html#install-tidy">activity 3</a> and 4 from Chapter 1 if you need a refresher.</p>
</section><section id="activity-2---reading-data-files-using-read_csv" class="level3" data-number="3.2.2"><h3 data-number="3.2.2" class="anchored" data-anchor-id="activity-2---reading-data-files-using-read_csv">
<span class="header-section-number">3.2.2</span> Activity 2 - Reading data files using <code>read_csv()</code>
</h3>
<p>Now we have loaded <code>tidyverse</code>, we can read in the data we need for the remaining activities. “Read” in this sense just means to bring the data into RStudio and store it in an <strong><a href="https://psyteachr.github.io/glossary/o#object" target="_blank" class="glossary" title="A word that identifies and stores the value of some data for later use.">object</a></strong>, so we can work with it.</p>
<p>We will use the function <code>read_csv()</code> that allows us to read in <strong><a href="https://psyteachr.github.io/glossary/c#csv" target="_blank" class="glossary" title="Comma-separated variable: a file type for representing data where each variable is separated from the next by a comma.">.csv files</a></strong>. There are also functions that allow you to read in Excel files (e.g.&nbsp;.xlsx) and other formats, but in this course we will only use .csv files as they are not software specific, meaning they are more accessible to share, promoting our open science principles.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Where does <code>read_csv()</code> come from?
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>When we describe tidyverse as a package of packages, the <code>read_csv()</code> function comes from a package called <code>readr</code>. This is one of the packages that tidyverse loads and contains several functions for reading different kinds of data.</p>
</div>
</div>
</div>
<p>Create a new code chunk below where you loaded <code>tidyverse</code>, type the following code, and run the code chunk:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/ahi-cesd.csv"</span>)</span>
<span id="cb2-2"><a href="#cb2-2"></a></span>
<span id="cb2-3"><a href="#cb2-3"></a>pinfo <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/participant-info.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To break down the code:</p>
<ul>
<li><p>First, we create an object called <code>dat</code> that contains the data in the <code>ahi-cesd.csv</code> file within <code>data/</code>.</p></li>
<li><p>Next, we create an object called <code>pinfo</code> that contains the data in the <code>participant-info.csv</code> file within <code>data/</code>.</p></li>
<li><p>Both lines have the same format of <code>object &lt;- function("folder/datafile_name.csv")</code></p></li>
<li><p>Remember that <code>&lt;-</code> is called the <strong><a href="https://psyteachr.github.io/glossary/a#assignment-operator" target="_blank" class="glossary" title="The symbol <-, which functions like = and assigns the value on the right to the object on the left">assignment operator</a></strong> but we can read it as “assigned to”. For example, the first line can be read as the data in <code>data/ahi-cesd.csv</code> is assigned to the object called <code>dat</code>.</p></li>
</ul>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Error mode
</div>
</div>
<div class="callout-body-container callout-body">
<p>There are several common mistakes that can happen here, so be careful how you are typing the code to read in the data.</p>
<ul>
<li><p>You need the double quotation marks around the data file name, so R recognises you are giving it a file path.</p></li>
<li><p>Computers are literal, so you must spell the data file name correctly. For example, R would not know what <code>data/participant-inf.csv</code> is. This is where pressing the tab key on your keyboard can be super helpful, as you can search and auto-complete your files and avoid spelling mistakes.</p></li>
<li><p>For the same reason as spelling mistakes, you must add the .csv part on the end to tell R the specific file you want.</p></li>
<li><p>You must point R to the right folder relative to your working directory. If you typed <code>ahi-cesd.csv</code>, you would receive an error as R would look in your chapter folder where <code>ahi-cesd.csv</code> does not exist, rather than within the <code>data/</code> folder you stored it in.</p></li>
</ul>
</div>
</div>
<p>If you have done this activity correctly, you should now see the objects <code>dat</code> and <code>pinfo</code> in the <strong><a href="https://psyteachr.github.io/glossary/e#environment" target="_blank" class="glossary" title="A data structure that contains R objects such as variables and functions">environment</a></strong> window in the top right of RStudio. If they are not there, check there are no error messages, check the spelling of the code and file names, and check your working directory is <code>Chapter_03_intro_data_viz</code>.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Be careful to use the right <code>read_csv()</code> function
</div>
</div>
<div class="callout-body-container callout-body">
<p>There is also a function called <code><a href="https://rdrr.io/r/utils/read.table.html">read.csv()</a></code>. Be very careful <strong>not</strong> to use this function instead of <code>read_csv()</code> as they have different ways of naming columns. For the activities and the assignments in RM1 and RM2, we will <strong>always</strong> ask and expect you to use <code>read_csv()</code>. This is really a reminder to watch spelling on functions and to be careful to use the right functions, especially when the names are so close.</p>
</div>
</div>
</section><section id="activity-3---wrangling-the-two-data-sets" class="level3" data-number="3.2.3"><h3 data-number="3.2.3" class="anchored" data-anchor-id="activity-3---wrangling-the-two-data-sets">
<span class="header-section-number">3.2.3</span> Activity 3 - Wrangling the two data sets</h3>
<p>For this final preparation step, we would like you to add the following code. We are not tackling data wrangling until the next chapter, so we are not going to fully explain the code just yet. Copy the code (if you hover over the code, there is a copy to clipboard icon in the top right) and paste it into a code chunk below where you read the two data files, then run the code again.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>all_dat <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(dat, </span>
<span id="cb3-2"><a href="#cb3-2"></a>                      pinfo, </span>
<span id="cb3-3"><a href="#cb3-3"></a>                      <span class="at">by=</span> <span class="fu">c</span>(<span class="st">"id"</span>, <span class="st">"intervention"</span>))</span>
<span id="cb3-4"><a href="#cb3-4"></a></span>
<span id="cb3-5"><a href="#cb3-5"></a>summarydata <span class="ot">&lt;-</span> <span class="fu">select</span>(<span class="at">.data =</span> all_dat, </span>
<span id="cb3-6"><a href="#cb3-6"></a>                      id,</span>
<span id="cb3-7"><a href="#cb3-7"></a>                      occasion, </span>
<span id="cb3-8"><a href="#cb3-8"></a>                      elapsed.days,</span>
<span id="cb3-9"><a href="#cb3-9"></a>                      intervention,</span>
<span id="cb3-10"><a href="#cb3-10"></a>                      ahiTotal, </span>
<span id="cb3-11"><a href="#cb3-11"></a>                      cesdTotal, </span>
<span id="cb3-12"><a href="#cb3-12"></a>                      sex, </span>
<span id="cb3-13"><a href="#cb3-13"></a>                      age, </span>
<span id="cb3-14"><a href="#cb3-14"></a>                      educ, </span>
<span id="cb3-15"><a href="#cb3-15"></a>                      income)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For a brief overview, we are joining the two data files by common columns (“id” and “intervention”) to create the object <code>all_dat</code>. We are then selecting 10 columns from the original 54 to make the data easier to work with in <code>summarydata</code>.</p>
<p>This final object <code>summarydata</code> is the source of the data we will be working with for the rest of this chapter.</p>
</section><section id="activity-4---exploring-the-data-set" class="level3" data-number="3.2.4"><h3 data-number="3.2.4" class="anchored" data-anchor-id="activity-4---exploring-the-data-set">
<span class="header-section-number">3.2.4</span> Activity 4 - Exploring the data set</h3>
<p>Before we start plotting, it is a good idea to explore the data set you are working with. There is a handy function called <code>glimpse()</code> which provides an overview of the columns and responses in your data set.</p>
<p>Create a new code chunk below where you read and wrangled the data, and type and run the following code:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="fu">glimpse</span>(summarydata)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 992
Columns: 8
$ ahiTotal     &lt;dbl&gt; 32, 34, 34, 35, 36, 37, 38, 38, 38, 38, 39, 40, 41, 41, 4…
$ cesdTotal    &lt;dbl&gt; 50, 49, 47, 41, 36, 35, 50, 55, 47, 39, 45, 47, 33, 27, 3…
$ sex          &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 2, 1, 2, 2, 1, 2, 1, 2, 2, 1, 1, 1, 1, …
$ age          &lt;dbl&gt; 46, 37, 37, 19, 40, 49, 42, 57, 41, 41, 52, 41, 52, 58, 5…
$ educ         &lt;dbl&gt; 4, 3, 3, 2, 5, 4, 4, 4, 4, 4, 5, 4, 5, 5, 5, 4, 3, 4, 3, …
$ income       &lt;dbl&gt; 3, 2, 2, 1, 2, 1, 1, 2, 1, 1, 2, 1, 3, 2, 2, 3, 2, 2, 2, …
$ occasion     &lt;dbl&gt; 5, 2, 3, 0, 5, 0, 2, 2, 2, 4, 4, 0, 4, 0, 1, 4, 0, 5, 4, …
$ elapsed.days &lt;dbl&gt; 182.025139, 14.191806, 33.033831, 0.000000, 202.096887, 0…</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Where does <code>glimpse()</code> come from?
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>The <code>glimpse()</code> function comes from a package called <code>dplyr</code>, which is part of the tidyverse. This package contains many functions for wrangling data like joining data sets and selecting columns. We will explore loads of functions within <code>dplyr</code> in the next few chapters on data wrangling.</p>
</div>
</div>
</div>
<p>This function provides a condensed summary of your data. You can see there are 992 rows and 10 columns. You see all the column names for each variable in the data set. You can also see that all the variables are automatically considered as <a href="https://psyteachr.github.io/glossary/n#numeric" target="_blank" class="glossary" title="A data type representing a real decimal number or integer.">numeric</a> (in this case <a href="https://psyteachr.github.io/glossary/d#double" target="_blank" class="glossary" title="A data type representing a real decimal number">double</a> represented by <code>&lt;dbl&gt;</code>). Treating categorical variables like “sex” and “income” as numbers will cause us problems later, but it is fine for the variables we will be working on now.</p>
</section></section><section id="ggplot2-and-the-layer-system" class="level2" data-number="3.3"><h2 data-number="3.3" class="anchored" data-anchor-id="ggplot2-and-the-layer-system">
<span class="header-section-number">3.3</span> <code>ggplot2</code> and the layer system</h2>
<p>There are multiple approaches to data visualisation in R but we will use <code>ggplot2</code> which uses a layered grammar of graphics where you build up plots in a series of layers. You can think of it as building a picture with multiple elements that sit over each other.</p>
<p><a href="#fig-img-layers">Figure&nbsp;<span>3.2</span></a> from <span class="citation" data-cites="nordmann_data_2022">Nordmann et al. (<a href="references.html#ref-nordmann_data_2022" role="doc-biblioref">2022</a>)</span> demonstrates the idea of building up a plot by adding layers. One function creates the first layer, the basic plot area, and you add functions and arguments to add additional layers such as the data, the labels, the colors etc. If you are used to making plots in other software, this might seem a bit odd at first, but it means that you can customise each layer separately to make complex and beautiful figures with relative ease.</p>
<p>You can get a sense of what plots are possible from <a href="https://www.data-to-viz.com/" target="_blank">the website data-to-viz</a>, but we will build up your data visualisation skills over the RM1 and RM2 courses.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-img-layers" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="images/layers2.PNG" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;3.2: Building a figure using the ggplot2 layering system from Nordmann et al.&nbsp;(2022).</figcaption></figure>
</div>
</div>
</div>
</section><section id="histograms-and-density-plots" class="level2" data-number="3.4"><h2 data-number="3.4" class="anchored" data-anchor-id="histograms-and-density-plots">
<span class="header-section-number">3.4</span> Histograms and density plots</h2>
<p>We are going to start by plotting the distribution of participant age in a histogram, and add layers to demonstrate how we build the plot step-by-step.</p>
<section id="step-1-start-with-the-ggplot-function" class="level3" data-number="3.4.1"><h3 data-number="3.4.1" class="anchored" data-anchor-id="step-1-start-with-the-ggplot-function">
<span class="header-section-number">3.4.1</span> Step 1: Start with the <code>ggplot</code> function</h3>
<p>This first layer tells R to access the <code>ggplot</code> function.</p>
<p>The first argument tells R to plot the <code>summarydata</code> dataframe. In the <code>aes</code> function, you specify the aesthetics of the plot, such as the axes and colours. What you need to specify depends on the plot you want to make (you will learn more about this later).</p>
<p>For a basic histogram, you only need to specify the x-axis (the y-axis will automatically be counts).</p>
<p>For each step, type the code in a new code chunk and run it after we add each layer to see it’s effect.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="co"># Plot the variable age from summarydata</span></span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="fu">ggplot</span>(summarydata, <span class="fu">aes</span>(<span class="at">x =</span> age)) <span class="co"># Plot age on the x axis</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="03-intro-data-viz_files/figure-html/histogram1-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
R Markdown tip of the chapter: Add code comments
</div>
</div>
<div class="callout-body-container callout-body">
<p>After we introduced you to R Markdown to create reproducible documents in Chapter 2, we are going to add a tip in every chapter to demonstrate extra functionality.</p>
<p>In the code chunk above, we added a code <a href="https://psyteachr.github.io/glossary/c#comment" target="_blank" class="glossary" title="Comments are text that R will not run as code. You can annotate .R files or chunks in R Markdown files with comments by prefacing each line of the comment with one or more hash symbols (#).">comment</a> by adding a hash (<code>#</code>). In code chunks and scripts, you can add a comment which R will ignore, so you can explain to yourself what the code is doing. In R Markdown, you can combine adding notes to yourself outside and inside the code chunks.</p>
<p>Code comments help explain what the code is doing and why you added certain values. It might seem redundant for simple functions, but as your code becomes more complex, you will forget what it is doing when you return to it after days, months, or years. Future you will thank past you.</p>
</div>
</div>
</section><section id="step-2-add-the-geom_histogram-layer" class="level3" data-number="3.4.2"><h3 data-number="3.4.2" class="anchored" data-anchor-id="step-2-add-the-geom_histogram-layer">
<span class="header-section-number">3.4.2</span> Step 2: Add the geom_histogram layer</h3>
<p>You can see that the code above produces an empty plot, because we have not specified which type of plot we want to make.</p>
<p>We will do this by adding another layer: <code>geom_histogram()</code>. A <a href="https://psyteachr.github.io/glossary/g#geom" target="_blank" class="glossary" title="The geometric style in which data are displayed, such as boxplot, density, or histogram.">geom</a> is an expression of the type of plot you want to create. For this variable, we want to create a <a class="glossary" title="A type of plot showing the frequency of each observation organised into bins. Bins control the width of each bar and how many observations it represents.">histogram</a> which is a type of plot showing the frequency of each observation.</p>
<p>You will see that you add the layers by adding a <code>+</code> at the end of each layer. As you read new code, try and read it line by line to walk through what it is doing. You can interpret <code>+</code> as “and then”. So, you could describe the plot as currently saying “plot the age variable from summary data, and then add a histogram”.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="co"># Plot the variable age from summarydata</span></span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="fu">ggplot</span>(summarydata, <span class="fu">aes</span>(<span class="at">x =</span> age)) <span class="sc">+</span>  <span class="co"># Plot age on the x axis</span></span>
<span id="cb7-3"><a href="#cb7-3"></a>  <span class="fu">geom_histogram</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="03-intro-data-viz_files/figure-html/histogram2-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section><section id="step-3-edit-the-histogram-bins" class="level3" data-number="3.4.3"><h3 data-number="3.4.3" class="anchored" data-anchor-id="step-3-edit-the-histogram-bins">
<span class="header-section-number">3.4.3</span> Step 3: Edit the histogram bins</h3>
<p>In just two lines of code, we have a histogram! For exploratory data analysis, this is how <code>ggplot2</code> is such a flexible and quick tool to get a visual overview of your data.</p>
<p>After running the last code chunk, you might have noticed a message warning you about the bin width: <code>stat_bin() using bins = 30</code>. A histogram describes the frequency of values within your variable. To do so, it must collect the values into “bins”. By default - the warning <code>ggplot2</code> gives you - it uses 30 bins, meaning it tries to plot 30 bars. Depending on the granularity of your data, you might want more or fewer bins.</p>
<p>You can control this using one of two arguments. First, you can add an argument called <code>binwidth</code> which sets the bins by how wide you want the bars on your x-axis scale. For example, we can plot the data for every 5 years:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="co"># Plot the variable age from summarydata</span></span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="fu">ggplot</span>(summarydata, <span class="fu">aes</span>(<span class="at">x =</span> age)) <span class="sc">+</span>  <span class="co"># Plot age on the x axis</span></span>
<span id="cb9-3"><a href="#cb9-3"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">5</span>) <span class="co"># collate bins into a 5-year span</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="03-intro-data-viz_files/figure-html/histogram3a-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p>Alternatively, you can control precisely how many bars the histograms uses through the <code>bins</code> argument. For example, we can plot age by collecting the observations into 10 bars:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="co"># Plot the variable age from summarydata</span></span>
<span id="cb10-2"><a href="#cb10-2"></a><span class="fu">ggplot</span>(summarydata, <span class="fu">aes</span>(<span class="at">x =</span> age)) <span class="sc">+</span>  <span class="co"># Plot age on the x axis</span></span>
<span id="cb10-3"><a href="#cb10-3"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">10</span>) <span class="co"># Plot age using 10 bars</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="03-intro-data-viz_files/figure-html/histogram3b-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Try this
</div>
</div>
<div class="callout-body-container callout-body">
<p>Play around with the <code>bin</code> and <code>binwidth</code> arguments to see what effect it has on the plot. One of the best ways of learning is through trial and error to see what effect your changes have on the result.</p>
</div>
</div>
</section><section id="step-4-edit-the-axis-names" class="level3" data-number="3.4.4"><h3 data-number="3.4.4" class="anchored" data-anchor-id="step-4-edit-the-axis-names">
<span class="header-section-number">3.4.4</span> Step 4: Edit the axis names</h3>
<p>By default, the axis names come from the variable names in your data. When you are making quick plots for yourself, you rarely need to worry about this. However, as you edit your plot for a report to show other people, it is normally a good idea to edit the names so they clearly communicate what they represent.</p>
<p>There are different layers to control the axes depending on the type of variable you use. Both the x- and y-axis here are continuous numbers, so we can use the <code>scale_x_continuous</code> and <code>scale_y_continuous</code> layers to control them.</p>
<p>There are many options available in <code>ggplot2</code> for controlling the axes, but you will learn through experience and searching what you need in different scenarios.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="co"># Plot the variable age from summarydata</span></span>
<span id="cb11-2"><a href="#cb11-2"></a><span class="fu">ggplot</span>(summarydata, <span class="fu">aes</span>(<span class="at">x =</span> age)) <span class="sc">+</span>  <span class="co"># Plot age on the x axis</span></span>
<span id="cb11-3"><a href="#cb11-3"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">5</span>) <span class="sc">+</span> <span class="co"># collate bins into a 5-year span</span></span>
<span id="cb11-4"><a href="#cb11-4"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">name =</span> <span class="st">"Age"</span>) <span class="sc">+</span></span>
<span id="cb11-5"><a href="#cb11-5"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">"Frequency"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="03-intro-data-viz_files/figure-html/histogram4-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section><section id="step-5-change-the-plot-theme" class="level3" data-number="3.4.5"><h3 data-number="3.4.5" class="anchored" data-anchor-id="step-5-change-the-plot-theme">
<span class="header-section-number">3.4.5</span> Step 5: Change the plot theme</h3>
<p>So far, we used the default plot theme which has the grey gridlines as a background. This looks pretty ugly, so we can edit the plot them by adding a <code>theme_</code> layer. For example, we can add a black-and-white theme:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="co"># Plot the variable age from summarydata</span></span>
<span id="cb12-2"><a href="#cb12-2"></a><span class="fu">ggplot</span>(summarydata, <span class="fu">aes</span>(<span class="at">x =</span> age)) <span class="sc">+</span>  <span class="co"># Plot age on the x axis</span></span>
<span id="cb12-3"><a href="#cb12-3"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">5</span>) <span class="sc">+</span> <span class="co"># collate bins into a 5-year span</span></span>
<span id="cb12-4"><a href="#cb12-4"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">name =</span> <span class="st">"Age"</span>) <span class="sc">+</span></span>
<span id="cb12-5"><a href="#cb12-5"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">"Frequency"</span>) <span class="sc">+</span> </span>
<span id="cb12-6"><a href="#cb12-6"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="03-intro-data-viz_files/figure-html/histogram5-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Try this
</div>
</div>
<div class="callout-body-container callout-body">
<p>There are loads of themes available. As you start typing <code>theme_</code>, you should see the full range appear as a drop-down to autocomplete. Try one or two alternatives such as <code>theme_classic()</code> or <code>theme_minimal()</code> to see how they look.</p>
</div>
</div>
</section><section id="switch-the-geom-layer" class="level3" data-number="3.4.6"><h3 data-number="3.4.6" class="anchored" data-anchor-id="switch-the-geom-layer">
<span class="header-section-number">3.4.6</span> Switch the geom layer</h3>
<p>The layer system makes it easy to create new types of plots by adapting existing recipes. For example, rather than creating a histogram, we can create a smoothed density plot by calling <code>geom_density()</code> rather than <code>geom_histogram()</code>. Apart from the name of the y-axis, the rest of the code remains identical to demonstrate how easy it is to customise your <code>ggplot2</code> layers.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="co"># Plot the variable age from summarydata</span></span>
<span id="cb13-2"><a href="#cb13-2"></a><span class="fu">ggplot</span>(summarydata, <span class="fu">aes</span>(<span class="at">x =</span> age)) <span class="sc">+</span>  <span class="co"># Plot age on the x axis</span></span>
<span id="cb13-3"><a href="#cb13-3"></a>  <span class="fu">geom_density</span>() <span class="sc">+</span> <span class="co"># summarise age as a smoothed density plot</span></span>
<span id="cb13-4"><a href="#cb13-4"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">name =</span> <span class="st">"Age"</span>) <span class="sc">+</span></span>
<span id="cb13-5"><a href="#cb13-5"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">"Density"</span>) <span class="sc">+</span> </span>
<span id="cb13-6"><a href="#cb13-6"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="03-intro-data-viz_files/figure-html/density-rt-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section><section id="activity-5---apply-your-plotting-skills-to-a-new-variable" class="level3" data-number="3.4.7"><h3 data-number="3.4.7" class="anchored" data-anchor-id="activity-5---apply-your-plotting-skills-to-a-new-variable">
<span class="header-section-number">3.4.7</span> Activity 5 - Apply your plotting skills to a new variable</h3>
<p>Before we move on to barplots, an important learning step is being able to apply or transfer what you learnt in one scenario to something new.</p>
<p>In the data set, there is a variable for The Authentic Happiness Inventory (AHI): <code>ahiTotal</code>. Plot the new variable and try to recreate the customisation layers before checking the solution below. It might take some trial-and-error to get some features right, so do not worry if it does not immediately look the same.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="03-intro-data-viz_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-9-contents" aria-controls="callout-9" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Show me the solution code
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-9" class="callout-9-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>To recreate the plot, this is the code:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="co"># Plot the variable ahi total from summarydata</span></span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="fu">ggplot</span>(summarydata, <span class="fu">aes</span>(<span class="at">x =</span> ahiTotal)) <span class="sc">+</span>  <span class="co"># Plot ahi total on the x axis</span></span>
<span id="cb14-3"><a href="#cb14-3"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">10</span>) <span class="sc">+</span> </span>
<span id="cb14-4"><a href="#cb14-4"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">name =</span> <span class="st">"Authentic Happiness Inventory (AHI)"</span>) <span class="sc">+</span></span>
<span id="cb14-5"><a href="#cb14-5"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">"Frequency"</span>) <span class="sc">+</span> </span>
<span id="cb14-6"><a href="#cb14-6"></a>  <span class="fu">theme_classic</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We were a little sneaky with using the classic theme to get you exploring.</p>
</div>
</div>
</div>
</section></section><section id="barplots" class="level2" data-number="3.5"><h2 data-number="3.5" class="anchored" data-anchor-id="barplots">
<span class="header-section-number">3.5</span> Barplots</h2>
<p>In the next section, we are going to cover making barplots - potentially the most common type of visualisation you will see in published research. A <a class="glossary" title="also known as a bar chart, barplots represent the frequency or count of a variable through the height of one or more bars.">barplot</a> shows counts of categorical data, or factors, where the height of each bar represents the count of that particular variable.</p>
<p>You will see people use them to represent continuous outcomes, such as showing the mean on the y-axis, but there is good reason to never use bar plots to communicate continuous data we will cover in the course materials <span class="citation" data-cites="weissgerber_reveal_2019">(see <a href="references.html#ref-weissgerber_reveal_2019" role="doc-biblioref">Weissgerber et al., 2019</a> if you are interested)</span>. We will cover more advanced plots for continuous data in <a href="#07-more-viz">Chapter 7 - Building your data visualisation skills</a>.</p>
<section id="introviz-a2" class="level3" data-number="3.5.1"><h3 data-number="3.5.1" class="anchored" data-anchor-id="introviz-a2">
<span class="header-section-number">3.5.1</span> Activity 6 - Covert to factors</h3>
<p>Earlier, we highlighted that all the variables were processed as numbers. This was fine for most of the variables, but <code>sex</code>, <code>educ</code>, and <code>income</code> should be categories or what we call <strong><a href="https://psyteachr.github.io/glossary/f#factor-data-type" target="_blank" class="glossary" title="A data type where a specific set of values are stored with labels">factors</a></strong>.</p>
<p>To get around this, we need to convert these variables into factors. This is relates to data wrangling, so this is one final time we would like you to copy and run code, before we fully explain how to write this kind of code independently in the next chapter.</p>
<p>Copy and run the following code in your R Markdown document, at least below where you read and wrangled the data:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="co"># Overwrite summary data </span></span>
<span id="cb15-2"><a href="#cb15-2"></a>summarydata <span class="ot">&lt;-</span> <span class="fu">mutate</span>(summarydata, <span class="co"># mutate to change columns </span></span>
<span id="cb15-3"><a href="#cb15-3"></a>         <span class="at">sex =</span> <span class="fu">as.factor</span>(sex), <span class="co"># save sex as a factor</span></span>
<span id="cb15-4"><a href="#cb15-4"></a>         <span class="at">educ =</span> <span class="fu">as.factor</span>(educ),</span>
<span id="cb15-5"><a href="#cb15-5"></a>         <span class="at">income =</span> <span class="fu">as.factor</span>(income))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You can interpret this code as “overwrite <code>summarydata</code> and transform three columns (<code>sex</code>, <code>educ</code>, and <code>income</code>) into the same values but now considered factors and not doubles”.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Error mode
</div>
</div>
<div class="callout-body-container callout-body">
<p>If you do not do convert numbers to factors when they should represent distinct categories, you can get some weird looking figures. Instead of treating the numbers as categories, it will try and plot the full range of numerical values. If you notice this, just go back and convert your variables to factors (which we will break down in the next chapter).</p>
</div>
</div>
</section><section id="introviz-a3" class="level3" data-number="3.5.2"><h3 data-number="3.5.2" class="anchored" data-anchor-id="introviz-a3">
<span class="header-section-number">3.5.2</span> Activity 7 - Create a bar plot</h3>
<p>Now you are familiar with the layering system, we will jump straight into creating the barplot. As before, type and run the code in each step, making notes to yourself either in the R Markdown document outside the code chunks, or using code comments.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="co"># Plot the variable sex from summarydata</span></span>
<span id="cb16-2"><a href="#cb16-2"></a><span class="fu">ggplot</span>(summarydata, <span class="fu">aes</span>(<span class="at">x =</span> sex)) <span class="sc">+</span> </span>
<span id="cb16-3"><a href="#cb16-3"></a>  <span class="fu">geom_bar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="03-intro-data-viz_files/figure-html/barplot1-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p>Compared to the histogram plot, the only difference here is using the <code>geom_bar()</code> as the layer instead. Rather than plot the frequency of your variable in bins, we plot the frequency of each unique category.</p>
<p>We can see 1s are way more frequent than 2s, but for this to make sense to you and your reader, we need to edit the axis labels.</p>
</section><section id="activity-8---edit-the-axis-labels" class="level3" data-number="3.5.3"><h3 data-number="3.5.3" class="anchored" data-anchor-id="activity-8---edit-the-axis-labels">
<span class="header-section-number">3.5.3</span> Activity 8 - Edit the axis labels</h3>
<p>In the histogram section, we demonstrated how to edit the axis labels. We used <code>scale_y_continuous</code> and <code>scale_x_continuous</code> as we had two continuous variables for the x-axis range and the y-axis frequency. This time, we need a slightly different layer since the x-axis now represents distinct groups: <code>scale_x_discrete</code>.</p>
<p>Type and run the following code:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a><span class="co"># Plot the variable sex from summarydata</span></span>
<span id="cb17-2"><a href="#cb17-2"></a><span class="fu">ggplot</span>(summarydata, <span class="fu">aes</span>(<span class="at">x =</span> sex)) <span class="sc">+</span> </span>
<span id="cb17-3"><a href="#cb17-3"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span> </span>
<span id="cb17-4"><a href="#cb17-4"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">name =</span> <span class="st">"Participant Sex"</span>, </span>
<span id="cb17-5"><a href="#cb17-5"></a>                   <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Female"</span>, <span class="co"># 1 = Female</span></span>
<span id="cb17-6"><a href="#cb17-6"></a>                              <span class="st">"Male"</span>)) <span class="sc">+</span> <span class="co"># 2 = Male</span></span>
<span id="cb17-7"><a href="#cb17-7"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">"Number of Participants"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="03-intro-data-viz_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p>Within <code>scale_x_discrete</code>, we have a new argument called “labels”. This is where we can edit the labels for each category. Instead of 1 and 2, we labelled the x-axis clearer as “Female” and “Male”, making it easier to understand there are way more female participants compared to male.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-11-contents" aria-controls="callout-11" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
What does <code><a href="https://rdrr.io/r/base/c.html">c()</a></code> mean in labels?
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-11" class="callout-11-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>When we specified the labels, you might have noticed the <code>c("Female", "Male")</code> format. <code><a href="https://rdrr.io/r/base/c.html">c()</a></code> stands for concatenate and you will see it a lot in R. When we give a value to a function argument, we must provide one “value”. However, in scenarios like this, we want to apply multiple values since we have several categories.</p>
<p>We can do this by adding all of our categories within <code><a href="https://rdrr.io/r/base/c.html">c()</a></code>, separated by a comma between each category.</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Error mode
</div>
</div>
<div class="callout-body-container callout-body">
<p>When you edit “labels”, it is crucial the values you give it are in the right order. There would be nothing stopping us from writing <code>c("Male", "Female")</code> and R will gladly listen to you and add those labels. However, that would be inaccurate as 1s mean Female and 2s mean Male. We are only editing the labels and not the underlying values in the data.</p>
<p>These errors are the most sneaky as it will not cause an error to fix, but they are still incorrect.</p>
</div>
</div>
</section><section id="activity-9---apply-your-plotting-skills-to-a-new-variable" class="level3" data-number="3.5.4"><h3 data-number="3.5.4" class="anchored" data-anchor-id="activity-9---apply-your-plotting-skills-to-a-new-variable">
<span class="header-section-number">3.5.4</span> Activity 9 - Apply your plotting skills to a new variable</h3>
<p>An important learning step is being able to apply or transfer what you learnt in one scenario to something new.</p>
<p>In the data set, there is a variable for the level of education: <code>educ</code>. Plot the new variable and try to recreate the customisation layers before checking the solution below.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="03-intro-data-viz_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-13-contents" aria-controls="callout-13" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Show me the solution code
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-13" class="callout-13-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>To recreate the plot, this is the code:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a><span class="co"># Plot the variable educ from summarydata</span></span>
<span id="cb18-2"><a href="#cb18-2"></a><span class="fu">ggplot</span>(summarydata, <span class="fu">aes</span>(<span class="at">x =</span> educ)) <span class="sc">+</span> </span>
<span id="cb18-3"><a href="#cb18-3"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span> </span>
<span id="cb18-4"><a href="#cb18-4"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span> </span>
<span id="cb18-5"><a href="#cb18-5"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">name =</span> <span class="st">"Level of Education"</span>, </span>
<span id="cb18-6"><a href="#cb18-6"></a>                   <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Less than year 12"</span>, <span class="co"># 1</span></span>
<span id="cb18-7"><a href="#cb18-7"></a>                              <span class="st">"Year 12"</span>, <span class="co"># 2 </span></span>
<span id="cb18-8"><a href="#cb18-8"></a>                              <span class="st">"Vocational training"</span>, <span class="co"># 3</span></span>
<span id="cb18-9"><a href="#cb18-9"></a>                              <span class="st">"Bachelor's degree"</span>, <span class="co"># 4</span></span>
<span id="cb18-10"><a href="#cb18-10"></a>                              <span class="st">"Postgraduate degree"</span>)) <span class="sc">+</span> <span class="co"># 5 </span></span>
<span id="cb18-11"><a href="#cb18-11"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">"Number of Participants"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section></section><section id="saving-your-figures" class="level2" data-number="3.6"><h2 data-number="3.6" class="anchored" data-anchor-id="saving-your-figures">
<span class="header-section-number">3.6</span> Saving your Figures</h2>
<p>The final step today will be to demonstrate how to save plots you create in <code>ggplot2</code>. It is so useful to be able to save a copy of your plots as an image file so that you can use them in a presentation or report. One approach we can use is the function <code>ggsave()</code>.</p>
<section id="introviz-a6" class="level3" data-number="3.6.1"><h3 data-number="3.6.1" class="anchored" data-anchor-id="introviz-a6">
<span class="header-section-number">3.6.1</span> Activity 10 - Saving your last plot</h3>
<p>There are two ways you can use <code>ggsave()</code>. If you do not tell <code>ggsave()</code> which plot you want to save, by default it will save <strong>the last plot you created</strong>.</p>
<p>To demonstrate this, let us run the code again from Activity 8 to produce the final version of our barplot. You do not need to write the code again if you already have it available in a code chunk, but make sure you run the code:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a><span class="co"># Plot the variable sex from summarydata</span></span>
<span id="cb19-2"><a href="#cb19-2"></a><span class="fu">ggplot</span>(summarydata, <span class="fu">aes</span>(<span class="at">x =</span> sex)) <span class="sc">+</span> </span>
<span id="cb19-3"><a href="#cb19-3"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span> </span>
<span id="cb19-4"><a href="#cb19-4"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">name =</span> <span class="st">"Participant Sex"</span>, </span>
<span id="cb19-5"><a href="#cb19-5"></a>                   <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Female"</span>, <span class="co"># 1 = Female</span></span>
<span id="cb19-6"><a href="#cb19-6"></a>                              <span class="st">"Male"</span>)) <span class="sc">+</span> <span class="co"># 2 = Male</span></span>
<span id="cb19-7"><a href="#cb19-7"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">"Number of Participants"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now that we have the plot we want to save as our last produced plot, all that <code>ggsave()</code> requires is for you to tell it the file path / name that it should save the plot to and the type of image file you want to create. The example below uses .png but you could also use .jpeg or another image type.</p>
<p>Type and run the following code into a new code chunk and then check your <code>figures</code> folder. If you have performed this correctly, then you should see the saved image. This is why we include a <code>figures</code> folder as part of the chapter structure, so you know exactly where your figures will be if you want to find them again.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a><span class="fu">ggsave</span>(<span class="st">"figures/participant_sex_barplot.png"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The image tends to save at a default size, or the size that the image is displayed in your viewer, but you can change this manually if you think that the dimensions of the plot are not correct or if you need a particular size or file type. Sometimes the dimensions look a little off when you save them, so you might need to play around with the size.</p>
<p>Type and run the following code to overwrite the image file with new dimensions. Try different dimensions and units to see the difference. You might want to create <code>participant_sex_barplot-v1.png</code>, <code>participant_sex_barplot-v2.png</code> etc. and compare them.</p>
<p>One final tip, by default, the plot has a transparent background which you do not notice on a white document, but looks odd on anything else. So, you can set a specific background colour through the argument <code>bg</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a> <span class="fu">ggsave</span>(<span class="st">"figures/participant_sex_barplot"</span>, </span>
<span id="cb21-2"><a href="#cb21-2"></a>        <span class="at">width =</span> <span class="dv">10</span>, <span class="co"># 10 inches wide</span></span>
<span id="cb21-3"><a href="#cb21-3"></a>        <span class="at">height =</span> <span class="dv">8</span>, <span class="co"># 8 inches high</span></span>
<span id="cb21-4"><a href="#cb21-4"></a>        <span class="at">units =</span> <span class="st">"in"</span>, </span>
<span id="cb21-5"><a href="#cb21-5"></a>        <span class="at">bg =</span> <span class="st">"white"</span>) <span class="co"># Make sure the background is white</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Remember, you can use <code>?ggsave()</code> in the console window to bring up the help file for this function if you want to look at what other arguments are available.</p>
</section><section id="saving-a-specific-plot" class="level3" data-number="3.6.2"><h3 data-number="3.6.2" class="anchored" data-anchor-id="saving-a-specific-plot">
<span class="header-section-number">3.6.2</span> Saving a specific plot</h3>
<p>Alternatively, the second way of using <code>ggsave()</code> is to save your plot as an object, and then tell it which object you want to save.</p>
<p>Type and run the code below and then check your folder for the image file. Resize the plot if you think it needs it.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>We do not add on <code>ggsave()</code> as a plot layer. Instead it is a separate line of code and we tell it which object to save. So, do not add <code>+ ggsave()</code> as a layer to your plot.</p>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a>sex_barplot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(summarydata, <span class="fu">aes</span>(<span class="at">x =</span> sex)) <span class="sc">+</span></span>
<span id="cb22-2"><a href="#cb22-2"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb22-3"><a href="#cb22-3"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">name =</span> <span class="st">"Participant Sex"</span>,</span>
<span id="cb22-4"><a href="#cb22-4"></a>                   <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Female"</span>, <span class="co"># 1 = Female</span></span>
<span id="cb22-5"><a href="#cb22-5"></a>                              <span class="st">"Male"</span>)) <span class="sc">+</span> <span class="co"># 2 = Male</span></span>
<span id="cb22-6"><a href="#cb22-6"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">"Number of Participants"</span>)</span>
<span id="cb22-7"><a href="#cb22-7"></a></span>
<span id="cb22-8"><a href="#cb22-8"></a></span>
<span id="cb22-9"><a href="#cb22-9"></a><span class="fu">ggsave</span>(<span class="st">"figures/participant-sex-barplot.png"</span>, </span>
<span id="cb22-10"><a href="#cb22-10"></a>       <span class="at">plot =</span> sex_barplot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Note that when you save a plot to an object, you will not see the plot displayed anywhere. To get the figure to display, you need to type the object name in the console (i.e., <code>sex_barplot</code>). The benefit of saving figures this way is that if you are making several plots, you cannot accidentally save the wrong one because you are explicitly specifying which plot to save rather than just saving the last one.</p>
</section></section><section id="test-yourself" class="level2" data-number="3.7"><h2 data-number="3.7" class="anchored" data-anchor-id="test-yourself">
<span class="header-section-number">3.7</span> Test Yourself</h2>
<p>To end the chapter, we have some knowledge check questions to test your understanding of the concepts we covered in the chapter. We then have some error mode tasks to see if you can find the solution to some common errors in the concepts we covered in this chapter.</p>
<section id="knowledge-check" class="level3" data-number="3.7.1"><h3 data-number="3.7.1" class="anchored" data-anchor-id="knowledge-check">
<span class="header-section-number">3.7.1</span> Knowledge check</h3>
<ol type="1">
<li>Which of these is the appropriate order of functions to create a barplot?</li>
</ol>
<div id="radio_EPTKJRGYTJ" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_EPTKJRGYTJ" value="answer"><span>ggplot() + geom_bar()</span></label><label><input type="radio" autocomplete="off" name="radio_EPTKJRGYTJ" value=""><span>ggplot() %&gt;% geom_bar()</span></label><label><input type="radio" autocomplete="off" name="radio_EPTKJRGYTJ" value=""><span>geom_plot() + geom_boxplot()</span></label><label><input type="radio" autocomplete="off" name="radio_EPTKJRGYTJ" value=""><span>geom_bar() + ggplot()</span></label>
</div>
<ol start="2" type="1">
<li>Why would this line of code not create a barplot, assuming you already loaded all data and libraries and you spelt the data and column names correctly?</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a><span class="fu">ggplot</span>(summarydata, <span class="fu">aes</span>(<span class="at">x =</span> sex)) <span class="sc">+</span></span>
<span id="cb23-2"><a href="#cb23-2"></a>  <span class="fu">geom_barplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="radio_KVVVCQCBGS" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_KVVVCQCBGS" value=""><span>because you have not included a y axis</span></label><label><input type="radio" autocomplete="off" name="radio_KVVVCQCBGS" value=""><span>because you have piped the barplot and not added it</span></label><label><input type="radio" autocomplete="off" name="radio_KVVVCQCBGS" value="answer"><span>because there is no geom_barplot() and it should be geom_bar()</span></label><label><input type="radio" autocomplete="off" name="radio_KVVVCQCBGS" value=""><span>because this would create a histogram</span></label>
</div>
<ol start="3" type="1">
<li>If I wanted precisely 5 bars in my histogram, what argument would I use?</li>
</ol>
<div id="radio_BRSKPBMFLX" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_BRSKPBMFLX" value=""><span>ggplot() + geom_histogram()</span></label><label><input type="radio" autocomplete="off" name="radio_BRSKPBMFLX" value=""><span>ggplot() + geom_histogram(binwidth = 5)</span></label><label><input type="radio" autocomplete="off" name="radio_BRSKPBMFLX" value=""><span>ggplot() + geom_histogram(bars = 5)</span></label><label><input type="radio" autocomplete="off" name="radio_BRSKPBMFLX" value="answer"><span>ggplot() + geom_histogram(bins = 5)</span></label>
</div>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-15-contents" aria-controls="callout-15" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Explain this answer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-15" class="callout-15-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ul>
<li><p><code>ggplot() + geom_histogram(bins = 5)</code>. This is the <strong>correct</strong> answer as you are asking ggplot2 to give you the plot organised into 5 bins.</p></li>
<li><p><code>ggplot() + geom_histogram(bars = 5)</code>. This is incorrect as you bars is not the right argument name. You want 5 bars, but the argument is bins.</p></li>
<li><p><code>ggplot() + geom_histogram(binwidth = 5)</code>. This is incorrect as binwidth controls the x-axis range to include per bar, rather than the number of bars.</p></li>
<li><p><code>ggplot() + geom_histogram()</code>. This is incorrect as you did not control the number of bins, so it will default to 30.</p></li>
</ul>
</div>
</div>
</div>
</section><section id="error-mode-3" class="level3" data-number="3.7.2"><h3 data-number="3.7.2" class="anchored" data-anchor-id="error-mode-3">
<span class="header-section-number">3.7.2</span> Error mode</h3>
<p>The following questions are designed to introduce you to making and fixing errors. For this topic, we focus on reading data and using ggplot2. Remember to keep a note of what kind of error messages you receive and how you fixed them, so you have a bank of solutions when you tackle errors independently.</p>
<p>Create and save a new R Markdown file for these activities by following the instructions in Chapter 2. You should have a blank R Markdown file below line 10. Below, we have several variations of a code chunk and inline code errors. Copy and paste them into your R Markdown file, click knit, and look at the error message you receive. See if you can fix the error and get it working before checking the answer.</p>
<p><strong>Question 4</strong>. Copy the following code chunk into your R Markdown file and press knit. You should receive an error like <code>Error in read_csv(): ! could not find function "read_csv"</code>.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode numberSource markdown number-lines code-with-copy"><code class="sourceCode markdown"><span id="cb24-1"><a href="#cb24-1"></a><span class="in">```{r}</span></span>
<span id="cb24-2"><a href="#cb24-2"></a>pinfo <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/participant-info.csv"</span>)</span>
<span id="cb24-3"><a href="#cb24-3"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-16-contents" aria-controls="callout-16" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Explain the solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-16" class="callout-16-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>If you only added this code chunk in, you have not loaded tidyverse yet. Remember R Markdown knits from start to finish in a fresh session, so it will not work even if you have loaded already tidyverse outside the R Markdown document. So, you would need to add <code><a href="https://tidyverse.tidyverse.org">library(tidyverse)</a></code> first.</p>
</div>
</div>
</div>
<p><strong>Question 5</strong>. Copy the following code chunk into your R Markdown file and press knit. You should receive an error like <code>! participant-info.csv does not exist in current working directory</code>.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode numberSource markdown number-lines code-with-copy"><code class="sourceCode markdown"><span id="cb25-1"><a href="#cb25-1"></a><span class="in">```{r}</span></span>
<span id="cb25-2"><a href="#cb25-2"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb25-3"><a href="#cb25-3"></a></span>
<span id="cb25-4"><a href="#cb25-4"></a>pinfo <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"participant-info.csv"</span>)</span>
<span id="cb25-5"><a href="#cb25-5"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-17-contents" aria-controls="callout-17" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Explain the solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-17" class="callout-17-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>You had tidyverse loaded this time, but it is not pointing to the right folder. Your working directory should be the main chapter folder, where <code>participant-info.csv</code> does not exist. You will need to edit it to <code>data/participant-info.csv</code> to work.</p>
</div>
</div>
</div>
<p><strong>Question 7</strong>. Copy the following code chunk into your R Markdown file and press knit. You should receive a long error where the problem is buried in the first five lines:</p>
<blockquote class="blockquote">
<p><code>Error in geom_histogram()</code></p>
</blockquote>
<blockquote class="blockquote">
<p><code>! Problem while computing stat.</code></p>
</blockquote>
<blockquote class="blockquote">
<p><code>i Error occurred in the 1st layer.</code></p>
</blockquote>
<blockquote class="blockquote">
<p><code>Caused by error in setup_params():</code></p>
</blockquote>
<blockquote class="blockquote">
<p><code>! stat_bin() requires an x or y aesthetic.</code></p>
</blockquote>
<div class="sourceCode" id="cb26"><pre class="sourceCode numberSource markdown number-lines code-with-copy"><code class="sourceCode markdown"><span id="cb26-1"><a href="#cb26-1"></a><span class="in">```{r}</span></span>
<span id="cb26-2"><a href="#cb26-2"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb26-3"><a href="#cb26-3"></a></span>
<span id="cb26-4"><a href="#cb26-4"></a>pinfo <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/participant-info.csv"</span>)</span>
<span id="cb26-5"><a href="#cb26-5"></a></span>
<span id="cb26-6"><a href="#cb26-6"></a><span class="co"># Plot the variable age from pinfo</span></span>
<span id="cb26-7"><a href="#cb26-7"></a><span class="fu">ggplot</span>(pinfo, <span class="at">x =</span> age) <span class="sc">+</span>   <span class="co"># Plot age on the x axis</span></span>
<span id="cb26-8"><a href="#cb26-8"></a>  <span class="fu">geom_histogram</span>()</span>
<span id="cb26-9"><a href="#cb26-9"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-18-contents" aria-controls="callout-18" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Explain the solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-18" class="callout-18-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>This is potentially a sneaky one where we missed the <code>aes()</code> argument and it is only line 5 of the error which gives it away: <code>! stat_bin() requires an x or y aesthetic</code>. The first ggplot2 layer has two key components: the data object you want to use, and the aesthetics to set. You need to add “aes()” around where you specify the x-axis: <code>ggplot(pinfo, aes(x = age))</code>.</p>
</div>
</div>
</div>
<p><strong>Question 7</strong>. Copy the following code chunk into your R Markdown file and press knit. This…works, but does not look quite right?</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode numberSource markdown number-lines code-with-copy"><code class="sourceCode markdown"><span id="cb27-1"><a href="#cb27-1"></a><span class="in">```{r}</span></span>
<span id="cb27-2"><a href="#cb27-2"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb27-3"><a href="#cb27-3"></a></span>
<span id="cb27-4"><a href="#cb27-4"></a>pinfo <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/participant-info.csv"</span>)</span>
<span id="cb27-5"><a href="#cb27-5"></a></span>
<span id="cb27-6"><a href="#cb27-6"></a><span class="co"># Plot the variable age from pinfo</span></span>
<span id="cb27-7"><a href="#cb27-7"></a><span class="fu">ggplot</span>(pinfo, <span class="fu">aes</span>(<span class="at">x =</span> age)) <span class="co"># Plot age on the x axis</span></span>
<span id="cb27-8"><a href="#cb27-8"></a>  <span class="fu">geom_histogram</span>()</span>
<span id="cb27-9"><a href="#cb27-9"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-19-contents" aria-controls="callout-19" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Explain the solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-19" class="callout-19-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>There is a missing <code>+</code> between the two ggplot2 layers. The code should be:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a><span class="co"># Plot the variable age from pinfo</span></span>
<span id="cb28-2"><a href="#cb28-2"></a><span class="fu">ggplot</span>(pinfo, <span class="fu">aes</span>(<span class="at">x =</span> age)) <span class="sc">+</span>  <span class="co"># Plot age on the x axis</span></span>
<span id="cb28-3"><a href="#cb28-3"></a>  <span class="fu">geom_histogram</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>At the moment, it runs the first layer to create an empty plot, then prints the information contained within geom_histogram.</p>
</div>
</div>
</div>
<p><strong>Question 8</strong>. Copy the following code chunk into your R Markdown file and press knit. You should receive a long error again with lines 5-7 key:</p>
<blockquote class="blockquote">
<p><code>! stat_bin() requires a continuous x aesthetic.</code></p>
</blockquote>
<blockquote class="blockquote">
<p><code>x the x aesthetic is discrete.</code></p>
</blockquote>
<blockquote class="blockquote">
<p><code>i Perhaps you want stat="count"?</code></p>
</blockquote>
<div class="sourceCode" id="cb29"><pre class="sourceCode numberSource markdown number-lines code-with-copy"><code class="sourceCode markdown"><span id="cb29-1"><a href="#cb29-1"></a><span class="in">```{r}</span></span>
<span id="cb29-2"><a href="#cb29-2"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb29-3"><a href="#cb29-3"></a></span>
<span id="cb29-4"><a href="#cb29-4"></a>pinfo <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/participant-info.csv"</span>)</span>
<span id="cb29-5"><a href="#cb29-5"></a></span>
<span id="cb29-6"><a href="#cb29-6"></a><span class="co"># Plot the variable age from pinfo</span></span>
<span id="cb29-7"><a href="#cb29-7"></a><span class="fu">ggplot</span>(pinfo, <span class="fu">aes</span>(<span class="at">x =</span> age)) <span class="sc">+</span>   <span class="co"># Plot age on the x axis</span></span>
<span id="cb29-8"><a href="#cb29-8"></a>  <span class="fu">geom_histogram</span>() <span class="sc">+</span> </span>
<span id="cb29-9"><a href="#cb29-9"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">name =</span> <span class="st">"Participant Age"</span>)</span>
<span id="cb29-10"><a href="#cb29-10"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-20-contents" aria-controls="callout-20" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Explain the solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-20" class="callout-20-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>The error message here is a little more useful and points to how we tried to edit the x-axis name. In a histogram, the x-axis is continuous for the range of a numeric variable. We tried using the discrete version of the layer to control the axis (<code>scale_x_discrete(name = "Participant Age")</code>) which we had to use for the bar plot. To fix the error, you would need to correct the layer to <code>scale_x_continuous(name = "Participant Age")</code>.</p>
</div>
</div>
</div>
</section></section><section id="words-from-this-chapter" class="level2" data-number="3.8"><h2 data-number="3.8" class="anchored" data-anchor-id="words-from-this-chapter">
<span class="header-section-number">3.8</span> Words from this Chapter</h2>
<p>Below you will find a list of words that were used in this chapter that might be new to you in case it helps to have somewhere to refer back to what they mean. The links in this table take you to the entry for the words in the <a href="https://psyteachr.github.io/glossary/" target="_blank">PsyTeachR Glossary</a>. Note that the Glossary is written by numerous members of the team and as such may use slightly different terminology from that shown in the chapter.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: left;">term</th>
<th style="text-align: left;">definition</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/a#assignment-operator" class="glossary" target="_blank">assignment-operator</a></td>
<td style="text-align: left;">The symbol &lt;-, which functions like = and assigns the value on the right to the object on the left</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/b#barplot" class="glossary" target="_blank">barplot</a></td>
<td style="text-align: left;">also known as a bar chart, barplots represent the frequency or count of a variable through the height of one or more bars.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/c#comment" class="glossary" target="_blank">comment</a></td>
<td style="text-align: left;">Comments are text that R will not run as code. You can annotate .R files or chunks in R Markdown files with comments by prefacing each line of the comment with one or more hash symbols (#).</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/c#console" class="glossary" target="_blank">console</a></td>
<td style="text-align: left;">The pane in RStudio where you can type in commands and view output messages.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/c#csv" class="glossary" target="_blank">csv</a></td>
<td style="text-align: left;">Comma-separated variable: a file type for representing data where each variable is separated from the next by a comma.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/d#data-visualisation" class="glossary" target="_blank">data-visualisation</a></td>
<td style="text-align: left;">A graphical representation of your data set.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/d#data-wrangling" class="glossary" target="_blank">data-wrangling</a></td>
<td style="text-align: left;">The process of preparing data for visualisation and statistical analysis.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/d#descriptive" class="glossary" target="_blank">descriptive</a></td>
<td style="text-align: left;">Statistics that describe an aspect of data (e.g., mean, median, mode, variance, range)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/d#double" class="glossary" target="_blank">double</a></td>
<td style="text-align: left;">A data type representing a real decimal number</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/e#environment" class="glossary" target="_blank">environment</a></td>
<td style="text-align: left;">A data structure that contains R objects such as variables and functions</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/f#factor-data-type" class="glossary" target="_blank">factor-data-type</a></td>
<td style="text-align: left;">A data type where a specific set of values are stored with labels</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/g#geom" class="glossary" target="_blank">geom</a></td>
<td style="text-align: left;">The geometric style in which data are displayed, such as boxplot, density, or histogram.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/h#histogram" class="glossary" target="_blank">histogram</a></td>
<td style="text-align: left;">A type of plot showing the frequency of each observation organised into bins. Bins control the width of each bar and how many observations it represents.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/n#numeric" class="glossary" target="_blank">numeric</a></td>
<td style="text-align: left;">A data type representing a real decimal number or integer.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/o#object" class="glossary" target="_blank">object</a></td>
<td style="text-align: left;">A word that identifies and stores the value of some data for later use.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/t#tidyverse" class="glossary" target="_blank">tidyverse</a></td>
<td style="text-align: left;">A set of R packages that help you create and work with tidy data</td>
</tr>
</tbody>
</table>
</div>
</div>
</section><section id="end-of-chapter" class="level2" data-number="3.9"><h2 data-number="3.9" class="anchored" data-anchor-id="end-of-chapter">
<span class="header-section-number">3.9</span> End of chapter</h2>
<p>Well done! It takes a while to get used to the layering system in ggplot2, particularly if you are used to making graphs a different way. But once it clicks, you will be able to make informative and professional visualisations with ease. Remember, data visualisation is useful for yourself to quickly plot your data, and it’s useful for your reader in communicating your key findings.</p>


<div id="refs" class="references csl-bib-body hanging-indent" data-line-spacing="2" role="list" style="display: none">
<div id="ref-nordmann_data_2022" class="csl-entry" role="listitem">
Nordmann, E., McAleer, P., Toivo, W., Paterson, H., &amp; DeBruine, L. M. (2022). Data <span>Visualization</span> <span>Using</span> <span>R</span> for <span>Researchers</span> <span>Who</span> <span>Do</span> <span>Not</span> <span>Use</span> <span>R</span>. <em>Advances in Methods and Practices in Psychological Science</em>, <em>5</em>(2), 25152459221074654. <a href="https://doi.org/10.1177/25152459221074654">https://doi.org/10.1177/25152459221074654</a>
</div>
<div id="ref-weissgerber_reveal_2019" class="csl-entry" role="listitem">
Weissgerber, T. L., Winham, S. J., Heinzen, E. P., Milin-Lazovic, J. S., Garcia-Valencia, O., Bukumiric, Z., Savic, M. D., Garovic, V. D., &amp; Milic, N. M. (2019). Reveal, <span>Don</span>’t <span>Conceal</span>. <em>Circulation</em>, <em>140</em>(18), 1506–1518. <a href="https://doi.org/10.1161/CIRCULATIONAHA.118.037777">https://doi.org/10.1161/CIRCULATIONAHA.118.037777</a>
</div>
<div id="ref-woodworth_data_2018" class="csl-entry" role="listitem">
Woodworth, R. J., O’Brien-Malone, A., Diamond, M. R., &amp; Schüz, B. (2018). Data from, <span>“<span>Web</span>-based <span>Positive</span> <span>Psychology</span> <span>Interventions</span>: <span>A</span> <span>Reexamination</span> of <span>Effectiveness</span>.”</span> <em>Journal of Open Psychology Data</em>, <em>6</em>(1), 1. <a href="https://doi.org/10.5334/jopd.35">https://doi.org/10.5334/jopd.35</a>
</div>
</div>
</section></main><!-- /main --><script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  var t = document.getElementsByClassName("webex-total_correct");
  for (var i = 0; i < t.length; i++) {
    p = t[i].parentElement;
    var correct = p.getElementsByClassName("webex-correct").length;
    var solvemes = p.getElementsByClassName("webex-solveme").length;
    var radiogroups = p.getElementsByClassName("webex-radiogroup").length;
    var selects = p.getElementsByClassName("webex-select").length;

    t[i].innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");

  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* check answers */
check_func = function() {
  console.log("webex: check answers");

  var cl = this.parentElement.classList;
  if (cl.contains('unchecked')) {
    cl.remove("unchecked");
    this.innerHTML = "Hide Answers";
  } else {
    cl.add("unchecked");
    this.innerHTML = "Show Answers";
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");

  var cl = this.classList

  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;

  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }

  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

window.onload = function() {
  console.log("webex onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  var check_sections = document.getElementsByClassName("webex-check");
  console.log("check:", check_sections.length);
  for (var i = 0; i < check_sections.length; i++) {
    check_sections[i].classList.add("unchecked");

    let btn = document.createElement("button");
    btn.innerHTML = "Show Answers";
    btn.classList.add("webex-check-button");
    btn.onclick = check_func;
    check_sections[i].appendChild(btn);

    let spn = document.createElement("span");
    spn.classList.add("webex-total_correct");
    check_sections[i].appendChild(spn);
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;

    solveme[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }

  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
    selects[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  update_total_correct();
}

</script><script>
// open rdrr links externally ----

var exlinks = document.querySelectorAll("a[href^='https://rdrr.io']");
var exlink_func = function(){
  window.open(this.href);
  return false;
};
for (var i = 0; i < exlinks.length; i++) {
    exlinks[i].addEventListener('click', exlink_func, false);
}

// visible second sidebar in mobile ----

function move_sidebar() {
  var toc = document.getElementById("TOC");
  var small_sidebar = document.querySelector("#quarto-sidebar .sidebar-menu-container");
  var right_sidebar = document.getElementById("quarto-margin-sidebar");

  if (window.innerWidth < 768) {
    small_sidebar.append(toc);
  } else {
    right_sidebar.append(toc);
  }
}
move_sidebar();
window.onresize = move_sidebar;
</script><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./02-starting-with-data.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Creating Reproducible Documents</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./04-wrangling-1.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Data wrangling 1: Join, select, and mutate</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">CC-BY (2024) James Bartlett &amp; Wil Toivo</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>


</body></html>